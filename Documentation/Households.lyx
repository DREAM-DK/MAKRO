#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass article
\begin_preamble
\input{preamble}
\end_preamble
\use_default_options true
\begin_modules
theorems-ams
eqs-within-sections
figs-within-sections
\end_modules
\maintain_unincluded_children false
\language american
\language_package default
\inputencoding auto
\fontencoding T1
\font_roman "times" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family rmdefault
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures false
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize 12
\spacing double
\use_hyperref false
\papersize a4paper
\use_geometry true
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine natbib
\cite_engine_type authoryear
\biblio_style plainnat
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\use_minted 0
\branch References
\selected 0
\filename_suffix 0
\color #faf0e6
\end_branch
\branch Relations to Gams code
\selected 0
\filename_suffix 0
\color #faf0e6
\end_branch
\branch ss
\selected 0
\filename_suffix 0
\color #faf0e6
\end_branch
\branch On growth and inflation correction
\selected 0
\filename_suffix 0
\color #faf0e6
\end_branch
\branch Low-beta-agents
\selected 0
\filename_suffix 0
\color #faf0e6
\end_branch
\branch HtM
\selected 1
\filename_suffix 0
\color #faf0e6
\end_branch
\branch HouseholdsVariables
\selected 0
\filename_suffix 0
\color #faf0e6
\end_branch
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 2.5cm
\rightmargin 2.5cm
\secnumdepth 3
\tocdepth 3
\paragraph_separation skip
\defskip bigskip
\is_math_indent 0
\math_numbering_side default
\quotes_style english
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Section
Households
\end_layout

\begin_layout Standard
The problem of the household is to choose optimal amounts of savings and
 expenditure, and within the expenditure, choose the different types of
 goods they consume.
 A particularly important good is housing as the model must replicate several
 important features of the data.
 These features include moments at aggregate level and life cycle profiles
 of housing ownership, mortgage debt, non-housing wealth, non-housing consumptio
n, and the intertemporal marginal propensity to consume out of different
 shocks.
\end_layout

\begin_layout Standard
The household problem contains several building blocks and we start by presentin
g the baseline case first.
 Afterwards, we outline in detail how household income is defined, how the
 financial portfolio is constructed, how the optimal decomposition of non-housin
g consumption occurs, and of how bequests are allocated.
\end_layout

\begin_layout Subsection
Basic definitions
\end_layout

\begin_layout Standard
The model is a discrete-time, perfect foresight, overlapping generations
 model of the life cycle.
 The size of the cohort aged 
\begin_inset Formula $a$
\end_inset

 in period 
\begin_inset Formula $t$
\end_inset

 is 
\begin_inset Formula $N_{a,t}$
\end_inset

 and is exogenous.
 
\begin_inset Branch HtM
inverted 0
status open

\begin_layout Standard
There are two types of households, unconstrained and 
\begin_inset Quotes eld
\end_inset

Hand-to-Mouth
\begin_inset Quotes erd
\end_inset

 [HtM].
 Unconstrained agents consume and save into housing and into a variety of
 liquid assets.
 HtM agents spend all their disposable income each period
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
We later introduce an ad-hoc rigidity allowing for persistence in consumption
 changes from transitory income shocks.
\end_layout

\end_inset

.
\end_layout

\end_inset


\begin_inset Branch Low-beta-agents
inverted 0
status open

\begin_layout Standard
Household heterogeneity is generated by heterogeneity in the subjective
 intertemporal discount factor which separates the household types into
 patient and impatient.
 Households save into housing and into a variety of liquid assets.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The household problem for each type is to choose an optimal consumption
 path over the life cycle given its income path.
 The income path is endogenous as the household decides also on its participatio
n in the labor market.
 However, as labor disutility is separable from other utility, we can treat
 this choice in isolation and it is thus discussed in the labor market chapter.
 Furthermore, consumption of different non-housing goods is the result of
 a CES nest optimization sequence which relates to the input/output structure
 of the data, detailed in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Consumption components"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
Henceforth we use the following symbols with the associated purposes: 
\begin_inset Formula $\eta$
\end_inset

 will denote an elasticity, 
\begin_inset Formula $\delta$
\end_inset

 a destruction or depreciation rate, 
\begin_inset Formula $\tau$
\end_inset

 will denote a tax rate, and 
\begin_inset Formula $\beta_{j}$
\end_inset

 will be the household's preference discount factor.
 Household types make up fractions 
\begin_inset Formula $\Upsilon_{j}\geq0$
\end_inset

 of population, with 
\begin_inset Formula $\sum_{j}\Upsilon_{j}=1$
\end_inset

.
\end_layout

\begin_layout Subsection
The household problem 
\begin_inset CommandInset label
LatexCommand label
name "subsec:The-household-problem"

\end_inset


\end_layout

\begin_layout Standard
Households of age 
\begin_inset Formula $a$
\end_inset

 in period 
\begin_inset Formula $t$
\end_inset

 make consumption and savings decisions to solve the following Bellman equation
\begin_inset Foot
status open

\begin_layout Plain Layout
For 
\begin_inset Formula $a\geqq18$
\end_inset

.
 Consumption for children under the age of 18 is assumed to be part of their
 parents' consumption.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\begin{aligned}V_{j,a,t}\left(B_{j,a-1,t-1},D_{j,a-1,t-1}\right) & =\max_{C_{j,a,t},D_{j,a,t}}U\left(C_{j,a,t},D_{j,a,t}\right)\\
 & +\beta_{j}V_{j,a,t}^{Wealth}\left(B_{j,a,t},D_{j,a,t}\right)\\
 & +\beta_{j}\mathbb{W}_{j,a+1,t+1}\left(B_{j,a,t},D_{j,a,t}\right)
\end{aligned}
\label{eq:Bellman}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
s.t.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
B_{j,a,t}=\left(1+r_{j,a,t}\right)B_{j,a-1,t-1}+y_{j,a,t}-p_{t}^{c}C_{j,a,t}-f\left(D_{j,a,t},D_{j,a-1,t-1}\right)
\]

\end_inset


\end_layout

\begin_layout Standard
where 
\begin_inset Formula $j$
\end_inset

 indexes household heterogeneity, 
\begin_inset Formula $a=0,1,2,...,A$
\end_inset

 indexes age with the index value 
\begin_inset Formula $a=0$
\end_inset

 belonging to the first age of life when children are born and until they
 become one year old.
 The letter 
\begin_inset Formula $t$
\end_inset

 indexes time.
\end_layout

\begin_layout Standard
In the budget constraint 
\begin_inset Formula $y_{j,a,t}$
\end_inset

 denotes income excluding returns on liquid assets, 
\begin_inset Formula $B_{j,a,t}$
\end_inset

 is the net stock of liquid assets, 
\begin_inset Formula $p_{t}^{c}$
\end_inset

 is the price of non-housing consumption 
\begin_inset Formula $C_{j,a,t}$
\end_inset

, and 
\begin_inset Formula $f(\cdot)$
\end_inset

 is a function capturing all elements of the budget constraint related to
 owned housing, (described in detail in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Detailing-the-"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
 Non-housing consumption, 
\begin_inset Formula $C_{j,a,t}$
\end_inset

, is split into several different consumption goods according to a CES tree
 structure, see Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Consumption components"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
In the objective function 
\begin_inset Formula $U(\cdot)$
\end_inset

 is instantaneous utility over non-housing consumption, 
\begin_inset Formula $C_{j,a,t}$
\end_inset

, and housing 
\begin_inset Formula $D_{j,a,t}$
\end_inset

, both of which have a habit component.
 This habit is external in the case of non-housing consumption, and internalized
 in the case of housing.
 The object 
\begin_inset Formula $V_{j,a,t}^{Wealth}(\cdot)$
\end_inset

 is the function capturing direct utility of wealth, and 
\begin_inset Formula $\mathbb{W}_{j,a+1,t+1}(\cdot)$
\end_inset

 is the continuation-value of the problem.
 This continuation value contains a probabilistic element in the form of
 the age-specific survival probabilities, 
\begin_inset Formula $s_{a}$
\end_inset

, such that 
\begin_inset Formula $\mathbb{W}_{j,a+1,t+1}(\cdot)$
\end_inset

 is given by
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align}
\mathbb{W}_{j,a+1,t+1}\left(B_{j,a,t},D_{j,a,t}\right) & =s_{a}V_{j,a+1,t+1}\left(B_{j,a,t},D_{j,a,t}\right)\nonumber \\
 & +\left(1-s_{a}\right)V_{j,a+1,t+1}^{Beq}\left(B_{j,a,t},D_{j,a,t}\right)
\end{align}

\end_inset


\end_layout

\begin_layout Standard
where 
\begin_inset Formula $V^{Beq}(\cdot)$
\end_inset

 is utility of leaving bequests in the case of not surviving till the next
 age of life.
\end_layout

\begin_layout Standard
Finally, the Bellman problem has household-specific 
\shape italic
state variables 
\shape default
which are the beginning of period stock of liquid wealth, 
\begin_inset Formula $B_{j,a-1,t-1},$
\end_inset

 the stock of housing, 
\begin_inset Formula $D_{j,a-1.t-1}$
\end_inset

, and the household age, 
\begin_inset Formula $a$
\end_inset

.
 The household type 
\begin_inset Formula $j$
\end_inset

 and its specific parameter values such as the discount rate 
\begin_inset Formula $\theta_{j}$
\end_inset

 are not states in terms of the Bellman problem as their values cannot change.
\end_layout

\begin_layout Subsection
Optimization
\begin_inset CommandInset label
LatexCommand label
name "subsec:Optimization"

\end_inset


\end_layout

\begin_layout Subsubsection
Savings decision
\begin_inset CommandInset label
LatexCommand label
name "subsec:Savings-decision"

\end_inset


\end_layout

\begin_layout Standard
The first-order condition for savings can be obtained by replacing the non-housi
ng consumption variable with the budget constraint in the Bellman equation,
 eq.
 (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:Bellman"
plural "false"
caps "false"
noprefix "false"

\end_inset

), and choosing end of period stock of assets 
\begin_inset Formula $B_{a,t}$
\end_inset

.
 We obtain
\begin_inset Formula 
\begin{equation}
\frac{U_{j,a,t}^{c}}{p_{t}^{c}}=\beta_{j}\left\{ s_{a,t}\left(1+\overline{r}_{t+1}^{B}\right)\frac{U_{j,a+1,t+1}^{c}}{p_{t+1}^{c}}+s_{a,t}\frac{\partial V_{j,a,t}^{Wealth}}{\partial B_{j,a,t}}+\left(1-s_{a,t}\right)\frac{\partial V_{j,a,t}^{Beq}}{\partial B_{j,a,t}}\right\} \label{eq:FOC_s}
\end{equation}

\end_inset

where 
\begin_inset Formula $\overline{r}_{t+1}^{B}$
\end_inset

 is the marginal rate of return,
\begin_inset Formula 
\[
\overline{r}_{t+1}^{B}=\frac{\partial\left(r_{t+1}B_{j,a,t}\right)}{\partial B_{j,a,t}}
\]

\end_inset

Equation (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:FOC_s"
plural "false"
caps "false"
noprefix "false"

\end_inset

) is a standard Euler equation, wherein the household trades-off current
 with future marginal utility of consumption.
 On the left hand side, the last unit of income used for current consumption
 yields 
\begin_inset Formula $1/p_{t}^{c}$
\end_inset

 units of consumption with marginal utility 
\begin_inset Formula $U_{j,a,t}^{c}$
\end_inset

.
 Optimality implies this must be identical to what is obtained from alternativel
y saving this marginal unit of income, earning a net marginal return 
\begin_inset Formula $\overline{r}_{t+1}^{B}$
\end_inset

, and using it next period for consumption, taking into account that one
 may die.
 This is given by
\begin_inset Formula 
\[
\left(1+\overline{r}_{t+1}^{B}\right)\frac{U_{j,a+1,t+1}^{c}}{p_{t+1}^{c}}
\]

\end_inset

weighed by the survival rate 
\begin_inset Formula $s_{a,t}$
\end_inset

 and discounted by the factor 
\begin_inset Formula $\beta_{j}$
\end_inset

 to match the current marginal utility.
 In addition, a surviving household will also derive the utility of the
 ownership of the extra wealth.
 On the other hand, in the chance 
\begin_inset Formula $\left(1-s_{a,t}\right)$
\end_inset

 that a household does not survive, it obtains the marginal change in bequest
 utility, 
\begin_inset Formula $\partial V_{a,t}^{Beq}/\partial B_{a,t}$
\end_inset

, measured in the future and discounted back for mechanical consistency,
 as in case of death the agent only dies tomorrow (and therefore after the
 current savings decision).
\end_layout

\begin_layout Paragraph*

\series bold
Terminal savings condition (last period of life)
\end_layout

\begin_layout Standard
The household lives up to 100 years of age.
 The survival rate is thus zero in the last age, 
\begin_inset Formula $s_{A,t}=0$
\end_inset

, but bequests still occur.
 We obtain
\begin_inset Formula 
\[
\frac{U_{j,A,t}^{c}}{p_{t}^{c}}=\beta_{j}\frac{\partial V_{j,A,t}^{Beq}}{\partial B_{j,A,t}},
\]

\end_inset

which determines assets at the end of life.
 However, setting the survival rate at zero induces an abrupt change in
 behavior at the end of life that distorts the optimal choice due to the
 truncation of life.
 We instead use the following equation where the survival rate is the actual
 rate observed at 100 years of age, 
\begin_inset Formula $s_{A,t}\neq0$
\end_inset

, and where we replace the would-be consumption of 101-year-olds with the
 consumption of next period's 100-year-olds:
\begin_inset Formula 
\[
\frac{U_{j,A,t}^{c}}{p_{t}^{c}}=\beta_{j}\left\{ s_{A,t}\left(1+\overline{r}_{t+1}^{B}\right)\frac{U_{j,A,t+1}^{c}}{p_{t+1}^{c}}+s_{A,t}\frac{\partial V_{j,A,t}^{Wealth}}{\partial B_{j,A,t}}+\left(1-s_{A,t}\right)\frac{\partial V_{j,A,t}^{Beq}}{\partial B_{j,A,t}}\right\} 
\]

\end_inset


\end_layout

\begin_layout Subsubsection
Housing decision 
\begin_inset CommandInset label
LatexCommand label
name "subsec:Housing-decision"

\end_inset


\end_layout

\begin_layout Standard
Housing 
\begin_inset Formula $D_{a,t}$
\end_inset

 is a stock variable.
 Like the choice of 
\begin_inset Formula $B_{a,t}$
\end_inset

, the choice of housing is a dynamic forward-looking decision with an associated
 intertemporal first-order condition.
 The general expression for this condition is
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Just as in the savings optimal choice, this equation needs to be adjusted
 in the final age of life.
\end_layout

\end_inset

 
\begin_inset Formula 
\[
\frac{U_{j,a,t}^{c}}{p_{t}^{c}}\left(\frac{\partial f_{j,a,t}}{\partial D_{j,a,t}}\right)=U_{j,a,t}^{d}+\beta_{j}s_{a,t}\frac{\partial U_{j,a+1,t+1}}{\partial D_{j,a,t}}+\beta_{j}s_{a,t}\frac{U_{j,a+1,t+1}^{c}}{p_{t+1}^{c}}\left(1+\overline{r}_{t+1}^{D}-\frac{\partial f_{j,a+1,t+1}}{\partial D_{j,a,t}}\right)
\]

\end_inset


\begin_inset Formula 
\begin{equation}
+\beta_{j}s_{a,t}\frac{\partial V_{j,a,t}^{Wealth}}{\partial D_{j,a,t}}+\beta_{j}\left(1-s_{a,t}\right)\frac{\partial V_{j,a,t}^{Beq}}{\partial D_{j,a,t}}\label{eq:FOC_d}
\end{equation}

\end_inset

with
\begin_inset Formula 
\[
\overline{r}_{t+1}^{D}=\frac{\partial r_{t+1}B_{j,a,t}}{\partial D_{j,a,t}}
\]

\end_inset

and where the presence of 
\begin_inset Formula $\frac{\partial U_{j,a+1,t+1}}{\partial D_{j,a,t}}$
\end_inset

 reflects the fact that the housing habit is internalized.
 This condition reads: when you sacrifice 
\begin_inset Formula $1/p_{t}^{c}$
\end_inset

 units of non-durable consumption today and use the money to buy extra housing,
 there is an immediate marginal utility loss from reduced consumption.
 This is the left-hand side of the equation.
 On the right-hand side, you gain the direct marginal utility of the durable
 good, 
\begin_inset Formula $U_{j,a,t}^{d}$
\end_inset

, and tomorrow you gain the marginal utility of non-durable consumption
 associated with the effect of the additional housing bought today on tomorrow's
 income, conditional on surviving.
 The direct effect of housing on tomorrow's budget is 
\begin_inset Formula $-\frac{\partial f_{j,a+1,t+1}}{\partial D_{j,a,t}}$
\end_inset

.
 Housing decisions may also affect tomorrow's budget through portfolio choices
 that change the rate of return on 
\begin_inset Formula $B$
\end_inset

, which is captured by 
\begin_inset Formula $\overline{r}_{t+1}^{D}$
\end_inset

, see section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Household-financial-portfolio"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 In the case of not surviving, you instead gain bequest utility in period
 
\begin_inset Formula $t+1$
\end_inset

.
\end_layout

\begin_layout Subsubsection
Putting the two together
\end_layout

\begin_layout Standard
It is useful to combine the two first-order conditions, (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:FOC_s"
plural "false"
caps "false"
noprefix "false"

\end_inset

) and (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:FOC_d"
plural "false"
caps "false"
noprefix "false"

\end_inset

), to get an expression for the user-cost of housing.
 .
 Here we merge them by eliminating the marginal utility of consumption in
 period t+1, 
\begin_inset Formula $U_{j,a+1,t+1}^{c}$
\end_inset

.
 We obtain
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{gather*}
\frac{U_{j,a,t}^{c}}{p_{t}^{c}}\left\{ \frac{\partial f_{j,a,t}}{\partial D_{j,a,t}}+\frac{1}{1+\overline{r}_{t+1}^{B}}\frac{\partial f_{j,a+1,t+1}}{\partial D_{j,a,t}}-\frac{1+\overline{r}_{t+1}^{D}}{1+\overline{r}_{t+1}^{B}}\right\} =U_{j,a,t}^{d}+\beta_{j}s_{a,t}\frac{\partial U_{j,a+1,t+1}}{\partial D_{j,a,t}}\\
+\beta_{j}s_{a,t}\left[\frac{\partial V_{j,a,t}^{Wealth}}{\partial D_{j,a,t}}-\frac{1+\overline{r}_{t+1}^{D}-\frac{\partial f_{j,a+1,t+1}}{\partial D_{j,a,t}}}{1+\overline{r}_{t+1}^{B}}\frac{\partial V_{j,a,t}^{Wealth}}{\partial B_{j,a,t}}\right]\\
+\beta_{j}\left(1-s_{a,t}\right)\left[\frac{\partial V_{j,a,t}^{Beq}}{\partial D_{j,a,t}}-\frac{1+\overline{r}_{t+1}^{D}-\frac{\partial f_{j,a+1,t+1}}{\partial D_{j,a,t}}}{1+\overline{r}_{t+1}^{B}}\frac{\partial V_{j,a,t}^{Beq}}{\partial B_{j,a,t}}\right]
\end{gather*}

\end_inset


\end_layout

\begin_layout Standard
This yields the user-cost of housing expression measured at time 
\begin_inset Formula $t$
\end_inset

 such that it is comparable to the current consumption price:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
p_{j,a,t}^{ucD}=\underbrace{\left\{ \frac{\partial f_{j,a,t}}{\partial D_{j,a,t}}+\frac{1}{1+\overline{r}_{t+1}^{B}}\frac{\partial f_{j,a+1,t+1}}{\partial D_{j,a,t}}-\frac{1+\overline{r}_{t+1}^{D}}{1+\overline{r}_{t+1}^{B}}\right\} }_{\text{User-cost of \ensuremath{D_{j,a,t}} measured at time t in nominal units.}}
\]

\end_inset


\end_layout

\begin_layout Standard
This merged equation has an intuitive reading.
 When the household sacrifices one unit of current consumption to buy additional
 housing, it must weigh the direct marginal utility of housing 
\begin_inset Formula $U_{j,a,t}^{d}$
\end_inset

 against the loss of marginal utility of consumption, 
\begin_inset Formula $U_{j,a,t}^{c}$
\end_inset

, net of the gain in the marginal utility of wealth and bequests.
\end_layout

\begin_layout Standard
We can also merge the two first-order conditions by eliminating the current
 marginal utility of consumption 
\begin_inset Formula $U_{j,a,t}^{c}$
\end_inset

.
 This is useful because, given the assumptions we make regarding utility
 of wealth and bequests
\begin_inset Foot
status open

\begin_layout Plain Layout
Specifically we use that 
\begin_inset Formula $\frac{\partial V_{j,a,t}^{Beq}}{\partial D_{j,a,t}}=\frac{\partial V_{j,a,t}^{Beq}}{\partial B_{j,a,t}}\frac{\partial f_{j,a,t}}{\partial D_{j,a,t}}$
\end_inset

 and 
\begin_inset Formula $\frac{\partial V_{j,a,t}^{Wealth}}{\partial D_{j,a,t}}=\frac{\partial V_{j,a,t}^{Wealth}}{\partial B_{j,a,t}}\frac{\partial f_{j,a,t}}{\partial D_{j,a,t}}$
\end_inset

, see section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Consumption-utility"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\end_inset

, we can also eliminate marginal utility of wealth and bequests from the
 resulting condition:
\begin_inset Formula 
\[
U_{j,a,t}^{d}+\beta_{j}s_{a,t}\frac{\partial U_{j,a+1,t+1}}{\partial D_{j,a,t}}=\beta_{j}s_{a,t}p_{j,a,t}^{ucD}\frac{1+\overline{r}_{t+1}^{B}}{p_{t+1}^{c}}U_{j,a+1,t+1}^{c}
\]

\end_inset

The intuition here is also clear.
 An additional unit of housing today yields the corresponding direct marginal
 utility of housing (adjusted for habit).
 This must be identical to the marginal utility of consumption we could
 obtain tomorrow if instead of spending the money on housing we took that
 amount of money, 
\begin_inset Formula $p_{j,a,t}^{ucD}$
\end_inset

, capitalized it 
\begin_inset Formula $\frac{1+\overline{r}_{t+1}^{B}}{p_{t+1}^{c}}$
\end_inset

, and used it to eat in case we survive.
\end_layout

\begin_layout Standard
Given the behavioral relations of the households, we proceed to various
 details around age, death, type, and the details of the components of consumpti
on and the budget constraint.
\end_layout

\begin_layout Subsection
Household Types
\begin_inset CommandInset label
LatexCommand label
name "subsec:Discount-factor-heterogeneity"

\end_inset


\end_layout

\begin_layout Standard
Our model consists of two types of households: patient and impatient.
 We want our “impatient” household to spend all disposable income every
 period, as in Campbell and Mankiw (1989) and Bilbiie (2008).
 Discounting the future implies the desire to spend more today than tomorrow,
 and when faced with a borrowing constraint this results in their consumption
 tracking income very closely resulting in a high marginal propensity to
 consume [MPC] out of changes in income.
 (Kaplan and Violante (2014) and Kaplan, Moll, and Violante (2018)).
 On the other hand, patient households have less or no desire to borrow
 and therefore typically have low marginal propensities to consume out of
 transitory income shocks, while reacting to permanent income changes.
 Thus, having a mix of agents within each cohort allows us to obtain realistic
 aggregate MPCs.
\end_layout

\begin_layout Standard
In addition, Fagereng et al.
 (2021) find significant consumption effects of transitory income shocks
 beyond their impact period.
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Kaplan and Violante (2021) review household finance literature that finds
 significant MPCs using micro-data.
\end_layout

\end_inset

 This behavior can be generated by models with buffer-stock behavior arising
 from income risk, implying that households near their borrowing constraint
 have some wealth (their buffer stock) and yet save little from transitory
 income shocks.
 A model with risk aversion and high impatience can generate this behavior.
 The high impatience means one wants to consume more today but risk aversion
 (and the inability to borrow) means you need to keep a minimum stock of
 wealth.
 High risk aversion is generated by high concavity of utility which implies
 also that you want to smooth the change in consumption over time.
\end_layout

\begin_layout Standard
The current implementation of HtM households in MAKRO is such that we use
 a reduced form instead of an exact derivation from the model.
 In the baseline, HtM households spend all their income such that
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
p_{t}^{C}q_{a,t}^{C}+f_{a,t}=y_{a,t}
\]

\end_inset


\end_layout

\begin_layout Standard
and
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
B_{a,t}=0
\]

\end_inset


\end_layout

\begin_layout Standard
In order to generate a protracted effect of transitory shocks to match empirical
 facts on MPC's, we introduce an ad-hoc backward-looking “stickiness” component
 in their consumption.
 We have then for our HtM households an equation approximating the merged
 first order conditions for 
\begin_inset Formula $B$
\end_inset

 and for 
\begin_inset Formula $D$
\end_inset

 (the type index 
\begin_inset Formula $j$
\end_inset

 is omitted)
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
p_{t}^{C}q_{a,t}^{C}+f_{a,t} & =\left(1-\psi\right)\left(\left[1+r_{a,t}\right]B_{a-1,t-1}+y_{a,t}\right)\\
 & +\psi\left(p_{t-1}^{C}q_{a-1,t-1}^{C}+f_{a-1,t-1}\right)\Gamma_{a,t}
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
where 
\begin_inset Formula $\psi$
\end_inset

 is the stickiness parameter and 
\begin_inset Formula $\Gamma_{a,t}$
\end_inset

 is calibrated so that HtM households spend all their income each period
 in the absence of any shocks.
 In case of a shock to their income, HtM households increase their consumption
 by only 
\begin_inset Formula $\left(1-\psi\right)$
\end_inset

 of the income change initially and gradually go back to holding zero assets
 by spending more in subsequent periods (
\begin_inset Formula $1-\psi$
\end_inset

 of any assets saved).
\end_layout

\begin_layout Standard
The equation closing the optimality of HtM households is a static first-order
 condition maximizing only current period utility for the choice of housing
 stock 
\begin_inset Formula $D$
\end_inset

 and which here consists exactly of the limit of the normal first-order
 condition as the discount factor tends to zero:
\begin_inset Formula 
\[
U_{j,a,t}^{c}\frac{1}{p_{t}^{c}}\frac{\partial f_{j,a,t}}{\partial D_{j,a,t}}=U_{j,a,t}^{d}
\]

\end_inset


\end_layout

\begin_layout Subsection
Children
\end_layout

\begin_layout Standard
Our consumer starts life as a teenager.
 The data reveals income and assets for children below the optimizing age
 in the model, which is 18 years.
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Optimal labor search decisions start at age 16, and this is possible because,
 by eliminating wealth effects from the labor decision we make the two problems
 independent of each other.
\end_layout

\end_inset

 Fitting the budget constraint of these children is important, as it allows
 us to calibrate initial wealth at 18 years of age correctly and correct
 for otherwise excessive consumption of the associated parental household.
\end_layout

\begin_layout Standard
Rather than modeling children as optimizing agents, we let their consumption
 be implicit in the parent's problem and create an exogenous income transfer
 variable from parents to children that will fit the child's budget constraint
 at zero consumption and is just enough to hit the asset target at age 18.
 Children are born with zero assets, and for a few ages, they actually have
 recorded disposable income, so their budget constraints are given by
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
B_{j,0<a<18,t}=\left(1+r_{j,a,t}\right)B_{j,a-1,t-1}+y_{j,a,t}+Transfer_{j,a,t}
\]

\end_inset


\begin_inset Formula 
\[
B_{j,0,t}=0
\]

\end_inset


\end_layout

\begin_layout Standard
As we calibrate this equation to the data, we obtain the value of initial
 assets for agents at the first optimizing age.
 Note that for the purpose of this document, the transfer from the parent
 to the child is hidden inside the disposable income variable of the parent.
\end_layout

\begin_layout Subsection
Migration
\end_layout

\begin_layout Standard
The population of a given age at a point in time will generally be such
 that
\begin_inset Formula 
\[
N_{a,t}=N_{a-1,t-1}s_{a-1,t-1}+I_{a,t}-E_{a,t}
\]

\end_inset

where some agents will have either emigrated, 
\begin_inset Formula $E_{a,t}$
\end_inset

, or immigrated, 
\begin_inset Formula $I_{a,t}$
\end_inset

, the country at this point.
\end_layout

\begin_layout Standard
We make the necessary assumptions to ensure that those entering the country
 have the same consumption, income, housing, and employment as surviving
 residents; otherwise, the model would have an intractable amount of heterogenei
ty.
 Those leaving take their assets with them.
 As for housing, agents leaving sell their housing stock while agents entering
 come in with zero housing, such that the total amount of housing in the
 country is unchanged by immigration and retains its characteristic of being
 a good that is not traded across borders.
\end_layout

\begin_layout Subsection
Detailing the 
\begin_inset Formula $f$
\end_inset

 housing object
\begin_inset CommandInset label
LatexCommand label
name "subsec:Detailing-the-"

\end_inset


\end_layout

\begin_layout Standard
The housing the household buys and sells is an aggregate of "bricks" and
 land.
 The "bricks" part of the house is produced mainly with inputs purchased
 from the construction sector.
 The country's entire stock of land is held by households embodied in their
 housing good, and land available for the construction of new houses is
 the land released as a result of housing depreciation.
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Only the bricks part of the house dies with depreciation.
 The corresponding land is sold.
 The depreciation rate 
\begin_inset Formula $\delta$
\end_inset

 is detailed in the appendix, see Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Land-and-housing"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\end_inset

 An intermediary buys output from the construction sector and other intermediate
 inputs, buys land from households released from depreciated housing, packages
 these together, and sells the resulting houses back to households.
 Land is introduced in MAKRO as a rigid production factor.
 In reality, land is a somewhat flexible factor, and we allow for exogenous
 increases in the aggregate stock.
\begin_inset Foot
status open

\begin_layout Plain Layout
Davis and Heathcote (2006), The Price and Quantity of Residential Land in
 the United States.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
We introduce an exogenous supply of rental accommodation, 
\begin_inset Formula $H$
\end_inset

, including an exogenous rent, to capture the non-negligible amount of existing
 public and regulated rental housing.
 We do not model the link between the rental market and the owned housing
 market.
 Thus, rent expenses appear only as an exogenous term in the budget constraint
 of the household.
\end_layout

\begin_layout Paragraph*
The costs and returns of housing
\end_layout

\begin_layout Standard
Owned housing is the overwhelming source of household debt, and housing
 finance is a significant fraction of total financial activity.
 Houses here are financed with a mortgage with an age-specific fraction
 of mortgage financing to house value, 
\begin_inset Formula $\mu_{a,t}$
\end_inset

, as a loan-to-value (LTV) term.
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Endogenous mortgage ratios require the specification of mortgage contracts
 and a model of credit.
\end_layout

\end_inset

 The object 
\begin_inset Formula $\mu_{j,a,t}$
\end_inset

 is exogenous to the household, but is modeled so that mortgages only gradually
 adjust to housing prices.
 Therefore, the model generates quantities for mortgage debt that change
 via the extensive margin (as the stock of housing changes) and via movements
 in prices when the extensive margin is constant.
 The detailed modeling of 
\begin_inset Formula $\mu_{j,a,t}$
\end_inset

 is discussed in Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Mortgages-and-Housing"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
Housing enters the budget constraint via the object 
\begin_inset Formula $f$
\end_inset

.
 This object is a cost function which contains financing, taxation, and
 maintenance, and deducts revenues from downsizing and from land sales.
 We detail the elements of 
\begin_inset Formula $f$
\end_inset

 with extended algebra and proofs in Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Mortgages-and-Housing"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\begin_inset Formula 
\begin{multline}
f\left(D_{j,a,t},D_{j,a-1,t-1}\right)=\left(1-\mu_{j,a,t}\right)p_{t}^{D}D_{j,a,t}\\
+\left\{ \left(1+r_{t}^{mort}\right)\mu_{j,a-1,t-1}+\tau_{t}^{W}+x_{t}-\frac{p_{t}^{D}}{p_{t-1}^{D}}\left(1-\delta_{t}^{d}\right)-\alpha_{t}^{Land}\right\} p_{t-1}^{D}D_{j,a-1,t-1}\label{eq:f}
\end{multline}

\end_inset


\end_layout

\begin_layout Standard
Since 
\begin_inset Formula $f$
\end_inset

 is a cost function we have non-mortgage financing 
\begin_inset Formula $\left(1-\mu_{j,a,t}\right)$
\end_inset

, property value taxes 
\begin_inset Formula $\tau_{t}^{W}$
\end_inset

 and maintenance costs 
\begin_inset Formula $x_{t}$
\end_inset

, and mortgage interest payments 
\begin_inset Formula $r_{t}^{mort}$
\end_inset

, all with a positive sign.
 Carried over un-depreciated housing, and income earned from selling land,
 are revenues and therefore appear with a negative sign.
 Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Land-and-housing"
plural "false"
caps "false"
noprefix "false"

\end_inset

 details the computation of the factor 
\begin_inset Formula $\alpha_{t}^{Land}$
\end_inset

 which defines the revenue from land sales.
 The partial derivatives of expression (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:f"
plural "false"
caps "false"
noprefix "false"

\end_inset

), which enter the user cost expression and the optimality condition, are
 now trivial to compute and are all either exogenous to or taken as given
 by the household.
\end_layout

\begin_layout Paragraph
Hidden user costs.
\end_layout

\begin_layout Standard
We incorporate an additional component in the user cost of housing to reflect
 the fact that houses have historically provided a higher but more volatile
 return than relatively risk free bond rates.
 As we cannot model stochastic returns while keeping the model tractable
 we instead add a risk premium directly (just as we do in the required return
 of equity).
 The term may also capture costs related to asymmetric information risk
 and other transaction costs.
 In our implementation, the risk premium raises the average user cost even
 though we do not account for them in the budget constraint and help the
 model fit the data.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
p_{j,a,t}^{ucD}=\underbrace{\left\{ \frac{\partial f_{j,a,t}}{\partial D_{j,a,t}}+\frac{1}{1+\overline{r}_{t+1}^{B}}\frac{\partial f_{j,a+1,t+1}}{\partial D_{j,a,t}}-\frac{1+\overline{r}_{t+1}^{D}}{1+\overline{r}_{t+1}^{B}}+\psi_{t+1}^{Risk}\right\} }_{\text{User-cost of \ensuremath{D_{j,a,t}} measured at time t in nominal units.}}
\]

\end_inset


\end_layout

\begin_layout Subsection
Household Income
\end_layout

\begin_layout Standard
Recall from subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:The-household-problem"
plural "false"
caps "false"
noprefix "false"

\end_inset

 that the budget constraint of the household is
\begin_inset Formula 
\[
B_{j,a,t}=B_{j,a-1,t-1}+r_{a,t}B_{j,a-1,t-1}+y_{j,a,t}-f\left(D_{j,a,t},D_{j,a-1,t-1}\right)-p_{t}^{c}C_{j,a,t}
\]

\end_inset


\end_layout

\begin_layout Standard
Wealth 
\begin_inset Formula $B$
\end_inset

 denotes non-housing net financial assets and excludes pension wealth.
 It includes ownership of financial stocks and bonds, as well as bank deposits,
 and subtracts non-mortgage bank debt.
\end_layout

\begin_layout Standard
The income term 
\begin_inset Formula $y_{j,a,t}$
\end_inset

 in this budget constraint incorporates a large number of taxes and transfers
 as well as the exogenous expenditure in rental housing.
 Before we detail the different elements inside 
\begin_inset Formula $y_{j,a,t}$
\end_inset

 it is useful to briefly define the rest of the items in the budget constraint.
\end_layout

\begin_layout Standard
The object 
\begin_inset Formula $f$
\end_inset

 contains all items of the budget constraint that relate to owned housing
 and consists of total net expenditure on owned housing.
 The term 
\begin_inset Formula $p_{t}^{c}C_{j,a,t}$
\end_inset

 denotes all non-housing consumption expenditure.
 These consumption prices include taxes.
 The rate of return on wealth 
\begin_inset Formula $r_{a,t}$
\end_inset

 is a portfolio rate of return
\begin_inset Foot
status open

\begin_layout Plain Layout
Note that the return is before taxes and taxes on returns are a part of
 
\begin_inset Formula $y_{j,a,t}$
\end_inset

.
\end_layout

\end_inset

.
\end_layout

\begin_layout Subsubsection
Income
\begin_inset CommandInset label
LatexCommand label
name "subsec:Income"

\end_inset


\end_layout

\begin_layout Standard
The income variable 
\begin_inset Formula $y_{j,a,t}$
\end_inset

 contains the following elements: wage income
\begin_inset Foot
status open

\begin_layout Plain Layout
Wage income per person is given by 
\begin_inset Formula $w_{t}\rho_{a,t}h_{a,t}q_{a,t}^{e}$
\end_inset

 where 
\begin_inset Formula $w_{t}$
\end_inset

 is the wage per productivity unit, 
\begin_inset Formula $\rho_{a,t}$
\end_inset

 is productivity units per hour worked, 
\begin_inset Formula $h_{a,t}$
\end_inset

 is hours worked per full time worker and 
\begin_inset Formula $q_{a,t}^{e}$
\end_inset

 are full time workers per person.
 All 
\begin_inset Formula $j$
\end_inset

 household types earn the same income given age.
 More detail can be found in the labor market chapter.
\end_layout

\end_inset

, 
\begin_inset Formula $y_{a,t}^{W}$
\end_inset

, net pension income, 
\begin_inset Formula $y_{j,a,t}^{PY}-y_{j,a,t}^{PC}$
\end_inset

, expenditure on rental housing, an assortment of income transfers, 
\begin_inset Formula $y_{a,t}^{G}$
\end_inset

, various taxes not related to housing or pensions, 
\begin_inset Formula $T_{j,a,t}^{\tau}$
\end_inset

, received bequests, 
\begin_inset Formula $y_{a,t}^{Beq}$
\end_inset

, net income flows associated with children, 
\begin_inset Formula $y_{j,a,t}^{children}$
\end_inset

, and residual items.
\begin_inset Formula 
\[
\begin{array}{ccc}
y_{j,a,t} & = & y_{a,t}^{W}+y_{j,a,t}^{PY}-y_{j,a,t}^{PC}-R_{t}^{rent}H_{a,t}+y_{a,t}^{G}\\
 &  & -T_{j,a,t}^{Hh}+y_{a,t}^{Beq}+y_{j,a,t}^{children}+y_{j,a,t}^{other}
\end{array}
\]

\end_inset


\end_layout

\begin_layout Standard
Of all these different items, only labor market income is endogenous to
 the household as it depends on search decisions.
\end_layout

\begin_layout Standard
The tax object 
\begin_inset Formula $T_{j,a,t}^{\tau}$
\end_inset

 captures a large number of specific taxes.
 Income taxes, local taxes, property taxes, taxes on financial income from
 stocks, taxes on income from individually held companies, estate taxes,
 labor market specific taxes, etc.
 These taxes are grouped differently depending on the purpose.
 For example, property value taxes are removed and included in the housing
 term 
\begin_inset Formula $f(\cdot)$
\end_inset

.
\end_layout

\begin_layout Subsection
Pensions
\end_layout

\begin_layout Standard
Pension income enters the disposable income of households as an exogenous
 income, and pension wealth satisfies accumulation consistency requirements
 which are also exogenous to the household.
\end_layout

\begin_layout Standard
MAKRO uses a simplified version of the detailed pension model in DREAM.
 The payment data is taken from the pension model from the Ministry of Finance
 (which builds on DREAM
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
In DREAM pensions are gender specific.
 As each generation in MAKRO is a cohort average, we sum pension contributions
 paid by men and women into their pension funds, as well as pensions received
 by men and women.
\end_layout

\end_inset

) and aggregates into three pension types: 1) pensions that have already
 been taxed (primarily 
\emph on
alderspension
\emph default
, index label 'Alder'), 2) capital pension (
\emph on
kapitalpension
\emph default
, index label 'Kap') taxed with a flat rate, and 3) the aggregate of other
 pensions, taxed when received by households (
\emph on
ratepensioner
\emph default
, 
\emph on
livrentepensioner
\emph default
 and 
\emph on
ATP
\emph default
, with index label 'PensX').
\end_layout

\begin_layout Standard
We omit index j for pensions as all types of households are assumed equal
 with respect to other pensions (
\begin_inset Formula $i$
\end_inset

 = 'Pensx') and as only patient households have taxed pensions (
\begin_inset Formula $i$
\end_inset

 = 'Alder') and capital pensions (
\begin_inset Formula $i$
\end_inset

 = 'Kap').
\end_layout

\begin_layout Subsubsection
Pension Contributions
\end_layout

\begin_layout Standard
It is assumed that an exogenous part of wages is paid as pension contributions
 to each type of pension:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
y_{i,a,t}^{PC}=\lambda_{i,a,t}^{PC}y_{a,t}^{W}
\]

\end_inset


\end_layout

\begin_layout Standard
where 
\begin_inset Formula $y_{a,t}^{W}$
\end_inset

 is wage income, and the parameter 
\begin_inset Formula $\lambda_{i,a,t}^{PC}$
\end_inset

 is calibrated so the pension contribution matches the pension data from
 the Ministry of Finance.
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset Formula $\lambda_{\text{Kap},a,t}^{PC}$
\end_inset

 is the average share of wage income paid to capital pensions.
 This represents patient households contributing with a share of 
\begin_inset Formula $\lambda_{\text{Kap},a,t}^{PC}$
\end_inset

/
\begin_inset Formula $\Upsilon_{Patient}$
\end_inset

.
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Pension wealth
\end_layout

\begin_layout Standard
The pension fund is a zero-profit vehicle with no costs.
 The three different types of pensions, indexed by 
\begin_inset Formula $i$
\end_inset

, are modeled as three separate actuarially fair pension schemes.
 So all contributions and after tax returns must be paid out to the same
 cohort (or as inheritance to their relatives).
\end_layout

\begin_layout Standard
The law of motion for individual pension wealth 
\begin_inset Formula $B_{i,a,t}^{P}$
\end_inset

 in a given pension scheme 
\begin_inset Formula $i$
\end_inset

 is
\begin_inset Formula 
\[
B_{i,a,t}^{P}=\left\{ \left(1+r_{t}^{P}\left[1-\tau_{t}^{P}\right]\right)B_{a-1,t-1}^{P,i}\frac{N_{a-1,t-1}}{N_{a,t}}\right\} \left\{ 1-\alpha_{i,a,t}^{BeqP}\left(1-s_{a-1,t-1}\right)\right\} +y_{i,a,t}^{PC}-y_{i,a,t}^{PY}
\]

\end_inset


\end_layout

\begin_layout Standard
The first term, 
\begin_inset Formula $\left(1+r_{t}^{P}\left[1-\tau_{t}^{P}\right]\right)B_{a-1,t-1}^{P,i}\frac{N_{a-1,t-1}}{N_{a,t}}$
\end_inset

, is simply the stock of wealth after taxed returns
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Note that all pension types are assumed to have the same portfolio and returns.
\end_layout

\end_inset

 scaled with population as only the surviving current population needs to
 share the stock of wealth.
 The second term, 
\begin_inset Formula $1-\alpha_{i,a,t}^{BeqP}\left(1-s_{a-1,t-1}\right)$
\end_inset

, adjusts for bequests.
 A part of the the households, 
\begin_inset Formula $1-s_{a-1,t-1}$
\end_inset

, do not survive from last period and a share of their pension wealth, 
\begin_inset Formula $\alpha_{i,a,t}^{BeqP}$
\end_inset

, is paid out to relatives as bequests and does not stay in the pension
 fond.
\end_layout

\begin_layout Subsubsection
Pension Income
\end_layout

\begin_layout Standard
We assume that an exogenous age specific share of the start-of-period pension
 wealth, 
\begin_inset Formula $B_{i,a-1,t-1}^{P}$
\end_inset

, (plus returns and contributions)
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
We define the payout share as a share of start-of-period wealth plus any
 returns and contributions, such that setting the payout rate to one means
 ending the period with zero wealth in the particular pension scheme.
\end_layout

\end_inset

 is paid out and received by households each period as pension income 
\begin_inset Formula $y_{i,a,t}^{PY}$
\end_inset

:
\begin_inset Formula 
\[
y_{i,a,t}^{PY}=\lambda_{i,a,t}^{PY}\left[\left\{ \left(1+r_{t}^{P}\left[1-\tau_{t}^{P}\right]\right)B_{i,a-1,t-1}^{P}\frac{N_{a-1,t-1}}{N_{a,t}}\right\} \left\{ 1-\alpha_{i,a,t}^{BeqP}\left(1-s_{a-1,t-1}\right)\right\} +y_{i,a,t}^{PC}\right]
\]

\end_inset

The parameter 
\begin_inset Formula $\lambda_{i,a,t}^{PY}$
\end_inset

 is calibrated to match pension income received by households in data from
 the Ministry of Finance.
\end_layout

\begin_layout Subsubsection
Composition and returns of pension portfolio
\end_layout

\begin_layout Standard
The aggregate pension wealth of pension fund 
\begin_inset Formula $i$
\end_inset

, 
\begin_inset Formula $B_{i,t}^{P}$
\end_inset

, is invested in stocks and bonds.
 We assume that all pension schemes have the same portfolio and yield the
 same return.
\end_layout

\begin_layout Standard
Assets of a specific type 
\begin_inset Formula $k$
\end_inset

 held by the pension fund, 
\begin_inset Formula $A_{k,t}^{P}$
\end_inset

 , are an exogenous fraction of total pension wealth:
\begin_inset Foot
status open

\begin_layout Plain Layout
Assets are indexed by 
\begin_inset Formula $k\in\left\{ \text{bonds, domestic equities, foreign equities}\right\} $
\end_inset

 and 
\begin_inset Formula $B_{t}^{P}=\sum_{i}B_{i,t}^{P}$
\end_inset

.
\end_layout

\end_inset


\begin_inset Formula 
\[
A_{k,t}^{P}=\omega_{k,t}^{P}\cdot B_{t}^{P}
\]

\end_inset


\end_layout

\begin_layout Standard
The return 
\begin_inset Formula $r_{t}^{P}$
\end_inset

 is a weighted average of the return on the portfolio elements:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
r_{t}^{P}=r_{k,t}\cdot\omega_{k,t}^{P}
\]

\end_inset


\end_layout

\begin_layout Subsection
Bequests
\begin_inset CommandInset label
LatexCommand label
name "subsec:Bequests"

\end_inset


\end_layout

\begin_layout Standard
Warm glow utility from bequests allows the model to replicate the large
 amounts of wealth held at the late ages of the life cycle.
\end_layout

\begin_layout Subsubsection
Death
\end_layout

\begin_layout Standard
Death occurs before any decision are taken.
 One way to think of the timing is as follows.
 At the beginning of period 
\begin_inset Formula $t$
\end_inset

 agents wake up or have died.
 In either case, the agent receives the financial income associated with
 their start-of-period net wealth.
 The assets of dead agents are distributed amongst their heirs as an exogenous
 income transfer.
 Finally, agents that are still alive receive other income and consume and
 save in period t, including out of bequests received.
\end_layout

\begin_layout Subsubsection
Bequests received, liquidating housing, and bequests in utility
\end_layout

\begin_layout Standard
All agents leave and receive bequests.
 In the event of death houses are sold and mortgages are liquidated so that
 bequests received will consist of liquid assets plus the liquid value of
 the equity on the house after liquidation.
 Given the exogenous mortgage ratio relationship the equity that is transformed
 into liquid assets next period is 
\begin_inset Formula 
\[
\left(1-\mu_{j,a,t}\right)p_{t+1}^{D}D_{j,a,t}
\]

\end_inset


\end_layout

\begin_layout Standard
where 
\begin_inset Formula $\mu_{j,a,t}$
\end_inset

 is the mortgage ratio taken from the data and detailed below.
 This is then taxed and the resulting net value received by the multiple
 heirs.
 From an accounting perspective, bequests given and received must add up
 to the same amount, before taxes.
 The mapping from bequests given to bequests received is done with an allocation
 age
\begin_inset Formula $\times$
\end_inset

age matrix 
\begin_inset Formula $M_{t}$
\end_inset

 estimated using administrative similarly to Boserup, Kopczuk, and Kreiner
 (2016) and detailed in Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Calculating-the-bequest"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
Bequests affect not only the budget constraint, but also preferences via
 
\begin_inset Formula $V_{j,a,t}^{Beq}$
\end_inset

, which will be further explained in the section detailing all preference
 features.
\end_layout

\begin_layout Subsection
Income differences between types
\end_layout

\begin_layout Standard
The income flow of HtM agents differs only slightly from that of patient
 agents.
\end_layout

\begin_layout Standard
Firstly, we remove certain pension schemes (
\emph on
alderspension
\emph default
 and 
\emph on
kapitalpension
\emph default
) that correspond closely to regular savings, with fewer restrictions on
 their payout plan or contributions that are entirely voluntary.
 These pensions are regularly payed out in large lump sums, which would
 imply unrealistic jumps in consumption for HtM agents.
 This corresponds to setting the pension contribution rates 
\begin_inset Formula $\lambda_{\text{HtM},i,a,t}^{PC}$
\end_inset

 to zero for the two pension schemes.
 Secondly, we add back income taxes related to financial income as HtM household
s hold no financial assets.
 Finally, we remove an inheritance adjustment term.
 The inheritance adjustment term is a term to make up for the fact that
 when households die in a cohort, the average household leaves behind quite
 a lot of wealth, however, it is typically poor households who die at earlier
 stages of life.
 Thus, the inheritance adjustment term re-transfers resources from, e.g.,
 a household that died at age 80 to the rest of the 80-year-old cohort.
 With fewer net assets, this adjustment is less important for HtM agents,
 but would result in implausible jumps in consumption, so we remove this
 term.
 Further details of inheritance allocation are in Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Calculating-the-bequest"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align}
y_{\text{HtM},a,t} & =y_{\text{patient},a,t}\label{eq:HtM_income}\\
 & -\text{capital pensions}-\text{age pension}\nonumber \\
 & +\text{stock return taxes}\nonumber \\
 & -\text{inheritance adjustment}\nonumber 
\end{align}

\end_inset


\end_layout

\begin_layout Subsection
Household financial portfolio
\begin_inset CommandInset label
LatexCommand label
name "subsec:Household-financial-portfolio"

\end_inset


\end_layout

\begin_layout Standard
The budget constraint of a household is 
\begin_inset Formula 
\[
B_{j,a,t}=\left(1+r_{a,t}\right)B_{j,a-1,t-1}+y_{j,a,t}-p_{t}^{c}C_{j,a,t}-f\left(D_{j,a,t},D_{j,a-1,t-1}\right)
\]

\end_inset


\end_layout

\begin_layout Standard
The model endogenously determines the net financial variable 
\begin_inset Formula $B$
\end_inset

.
 In the data this quantity is made up of the sum of different assets, 
\begin_inset Formula $i\in\{\text{domestic equities, cash and bank deposits, foreign equities, bonds\}}$
\end_inset

, minus the sum of liabilities, 
\begin_inset Formula $l\in\{\text{BankDebt}\}$
\end_inset

, so that 
\begin_inset Formula $B=\sum_{i}A_{i}-\sum_{l}L_{l}$
\end_inset

.
\end_layout

\begin_layout Standard
We model this decomposition into assets and liabilities as functions of
 net non-mortgage financial assets 
\begin_inset Formula $B$
\end_inset

 and housing 
\begin_inset Formula $D$
\end_inset

 as well as an age-dependent intercept term 
\begin_inset Formula $I$
\end_inset

:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
A_{j,i,a,t}=I_{i,a}Y_{t}^{B}+\lambda_{i}^{B}B_{j,a,t}+\lambda_{i}^{D}\bar{p}_{t}^{D}D_{j,a,t}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
L_{j,l,a,t}=I_{l,a}Y_{t}^{B}+\lambda_{l}^{B}B_{j,a,t}+\lambda_{l}^{D}\bar{p}_{t}^{D}D_{j,a,t}
\]

\end_inset


\end_layout

\begin_layout Standard
To preserve homogeneity, the intercept term is scaled with a slow-moving
 measure of average household income 
\begin_inset Formula $Y_{t}^{B}$
\end_inset

.
 Housing enters with the same gradually adjusting housing price, 
\begin_inset Formula $\bar{p}_{t}^{D}$
\end_inset

, that is used for the purpose of the mortgage loan-to-value fraction.
\end_layout

\begin_layout Standard
The marginal changes in the portfolio from a change in either 
\begin_inset Formula $B$
\end_inset

 or 
\begin_inset Formula $D$
\end_inset

 are independent of age and household type.
 All households therefore face the same marginal rates of return on net
 savings:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
1+\overline{r}_{t+1}^{B} & =\frac{\partial}{\partial B_{j,a,t}}\left\{ \left(1+r_{t+1}\right)B_{j,a,t}\right\} \\
 & =1+\sum_{i}r_{i,t+1}\lambda_{i}^{B}-\sum_{l}r_{l,t+1}\lambda_{l}^{B}
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
and additional housing affects the portfolio in the same way:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
1+\overline{r}_{t+1}^{D} & =\frac{\partial}{\partial D_{j,a,t}}\left\{ \left(1+r_{t+1}\right)B_{j,a,t}\right\} \\
 & =1+\bar{p}_{t}^{D}\left(\sum_{i}r_{i,t+1}\lambda_{i}^{D}-\sum_{l}r_{l,t+1}\lambda_{l}^{D}\right)
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Portfolio"
plural "false"
caps "false"
noprefix "false"

\end_inset

 covers the estimation of the household portfolio model and goes into more
 detail about the motivation behind the modeling decisions.
 There may be theoretical reasons to think portfolio composition should
 vary over the life cycle.
 If the data contains such heterogeneity, the estimated parameters will
 reflect that by having different values for different assets.
 In addition, the estimated portfolio is an optimal portfolio given the
 underlying assumption is that agents made optimal decisions that resulted
 in the portfolios we observe in the data.
\end_layout

\begin_layout Subsection
Utility
\begin_inset CommandInset label
LatexCommand label
name "sec:Consumption-utility"

\end_inset


\end_layout

\begin_layout Subsubsection

\series bold
Utility of consumption and housing
\end_layout

\begin_layout Standard
The main utility flow 
\begin_inset Formula $U$
\end_inset

 is a CRRA object over a CES consumption composite 
\begin_inset Formula $\tilde{U}$
\end_inset

, subtracted by a term 
\begin_inset Formula $\tilde{V}$
\end_inset

 which captures disutility of house price changes; 
\begin_inset Formula 
\[
U(C_{j,a,t},D_{j,a,t})=\frac{1}{1-\eta}\left[\tilde{U}_{j,a,t}\right]^{1-\eta}-\tilde{V}\left(\Pi_{t}^{D},\Pi_{t-1}^{D},D_{j,a,t}\right)
\]

\end_inset

where gross house price inflation is 
\begin_inset Formula $\Pi_{t}^{D}\equiv P_{t}^{D}/P_{t-1}^{D}$
\end_inset

.
 The function 
\begin_inset Formula $\tilde{U}_{j,a,t}$
\end_inset

 is
\begin_inset Formula 
\[
\tilde{U}_{j,a,t}\equiv\left[\left(\upsilon_{j,a,t}^{c}\right)^{\frac{1}{E}}\left(C_{j,a,t}\right)^{\frac{E-1}{E}}+\left(\upsilon_{j,a,t}^{d}\right)^{\frac{1}{E}}\left(D_{j,a,t}\right)^{\frac{E-1}{E}}\right]^{\frac{E}{E-1}}
\]

\end_inset

where 
\begin_inset Formula $E$
\end_inset

 is the substitution elasticity between housing and non-housing, and 
\begin_inset Formula $\upsilon^{c},\upsilon^{d}$
\end_inset

 are utility weights on the two.
 The contemporaneous derivatives are 
\begin_inset Formula 
\[
U_{j,a,t}^{c}\equiv\frac{\partial U_{j,a,t}}{\partial C_{j,a,t}}=\left[\tilde{U}_{j,a,t}\right]^{-\eta}\cdot\left(\frac{\upsilon_{j,a,t}^{c}\tilde{U}_{j,a,t}}{C_{j,a,t}}\right)^{\frac{1}{E}}
\]

\end_inset

and
\begin_inset Formula 
\[
U_{j,a,t}^{d}\equiv\frac{\partial U_{j,a,t}}{\partial D_{j,a,t}}=\left[\tilde{U}_{j,a,t}\right]^{-\eta}\left(\frac{\upsilon_{j,a,t}^{d}\tilde{U}_{j,a,t}}{D_{j,a,t}}\right)^{\frac{1}{E}}-\frac{\partial\tilde{V}_{j,a,t}}{\partial D_{j,a,t}}
\]

\end_inset


\end_layout

\begin_layout Standard
Finally, non-housing consumption is itself a CES nest over a range of consumptio
n goods, see subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Consumption components"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Paragraph

\series bold
Habits and household size
\end_layout

\begin_layout Standard
We include habits in consumption in order to obtain persistent consumption
 responses to shocks, as is standard in New Keynesian models.
 We then rewrite
\begin_inset Formula 
\[
\tilde{U}_{j,a,t}\equiv\tilde{U}\left(\tilde{C}_{j,a,t},\tilde{D}_{j,a,t}\right)
\]

\end_inset

where 
\begin_inset Formula $\tilde{C}_{j,a,t}$
\end_inset

 denotes consumption net of a reference quantity (habit) with a coefficient
 
\begin_inset Formula $\chi$
\end_inset

:
\begin_inset Formula 
\[
\tilde{C}_{j,a,t}=\frac{C_{j,a,t}}{\zeta_{a,t}}-\chi^{C}\frac{C_{j,a-1,t-1}}{\zeta_{j,a-1,t-1}}
\]

\end_inset

The weight, 
\begin_inset Formula $\zeta_{a,t}$
\end_inset

, depends on the number of children in the household
\begin_inset Formula 
\[
\zeta_{a,t}=1+\frac{1}{2}n_{a,t}^{\text{children}}
\]

\end_inset


\end_layout

\begin_layout Standard
We do the same for housing by considering the following object inside utility
\begin_inset Formula 
\[
\tilde{D}_{j,a,t}=\frac{D_{j,a,t}}{\zeta_{a,t}}-\chi^{D}\frac{D_{j,a-1,t-1}}{\zeta_{a-1,t-1}}
\]

\end_inset


\end_layout

\begin_layout Standard
Note that 
\begin_inset Formula $\zeta_{a,t}$
\end_inset

 can be eliminated by redefining utility weights 
\begin_inset Formula $\upsilon_{j,a,t}^{c}$
\end_inset

 and 
\begin_inset Formula $\upsilon_{j,a,t}^{d}$
\end_inset

 to include the effect of children implicitly (and slightly modifying the
 coefficients 
\begin_inset Formula $\chi^{C}$
\end_inset

 and 
\begin_inset Formula $\chi^{D}$
\end_inset

).
 We include the explicit adjustment for the number of children as this number
 is also forecast explicitly, whereas 
\begin_inset Formula $\upsilon_{j,a,t}^{c}$
\end_inset

 and 
\begin_inset Formula $\upsilon_{j,a,t}^{d}$
\end_inset

 are calibrated to match the level of consumption in the data.
\end_layout

\begin_layout Standard
The reference quantity 
\begin_inset Formula $C_{j,a-1,t-1}$
\end_inset

 is viewed as the average of the cohort in the previous period, rather than
 the individual household's own previous decisions.
 In this way it is exogenous to the household.
 Housing habits are internal so the household takes them into account in
 optimization.
 See Dennis (2009) for a comparison of 
\emph on
internal
\emph default
 and 
\emph on
external 
\emph default
habits.
\end_layout

\begin_layout Subsubsection
Utility of Bequests
\end_layout

\begin_layout Standard
Bequests do not just enter the budget constraint.
 They are a key object in preferences.
 The bequest utility of the dying agent is
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
V_{j,a,t}^{Beq}=\xi_{j,a,t}^{Beq}\frac{\left[X_{j,a,t}^{Beq}\right]^{1-\eta}}{1-\eta}\label{eq:v_beq-1}
\end{equation}

\end_inset

where we define the interior object, 
\begin_inset Formula $X^{Beq}$
\end_inset

, as
\begin_inset Formula 
\[
X_{j,a,t}^{Beq}\equiv\left(1-\tau_{t+1}^{Beq}\right)\frac{B_{j,a,t}+p_{t}^{D}\left(1-\mu_{j,a,t}\right)D_{j,a,t}+V_{j,a,t}^{PensionB}}{p_{t+1}^{c}}-\xi^{0}
\]

\end_inset


\end_layout

\begin_layout Standard
and the utility associated with bequests is scaled with 
\begin_inset Formula $\xi_{j,a,t}^{Beq}$
\end_inset

 .
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
In these functions we generally allow for an interior parameter 
\begin_inset Formula $\xi^{0}$
\end_inset

 to avoid negative objects rendering the model unsolvable.
 This parameter has a default value of zero.
\end_layout

\end_inset

 It is important to note that, as this is a utility construction, there
 is a degree of freedom in the definition of the object 
\begin_inset Formula $X^{Beq}$
\end_inset

.
 Here we attach value to the sum of assets, rather than, for example, attaching
 a separate special value to the house, although both formulations are feasible.
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Li, Liu, Yang, and Yao (2016) have a CES function of housing and other assets
 as bequest utility.
 Kaplan, Mitman and Violante (2017) do as here.
\end_layout

\end_inset

 Using the sum of assets, and including some pension entitlements inside
 
\begin_inset Formula $X^{Beq}$
\end_inset

 allows for substitutability so that the household is indifferent regarding
 which type of asset makes it richer (we use the same approach with respect
 to the utility of wealth), or makes those who will inherit these bequests
 richer.
 Finally, note that we value the house inside 
\begin_inset Formula $X^{Beq}$
\end_inset

 at the current price 
\begin_inset Formula $p_{t}^{D}$
\end_inset

.
 The derivatives of (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:v_beq-1"
plural "false"
caps "false"
noprefix "false"

\end_inset

) are
\begin_inset Formula 
\[
\frac{\partial V_{j,a,t}^{Beq}}{\partial B_{j,a,t}}=\frac{\partial V_{j,a,t}^{Beq}}{\partial X_{j,a,t}^{Beq}}\frac{\partial X_{j,a,t}^{Beq}}{\partial B_{j,a,t}}=\xi_{j,a,t}^{Beq}\left[X_{j,a,t}^{Beq}\right]^{-\eta}\frac{\left(1-\tau_{t+1}^{Beq}\right)}{p_{t+1}^{c}}
\]

\end_inset


\end_layout

\begin_layout Standard
and
\begin_inset Formula 
\[
\frac{\partial V_{j,a,t}^{Beq}}{\partial D_{j,a,t}}=\frac{\partial V_{j,a,t}^{Beq}}{\partial X_{j,a,t}^{Beq}}\frac{\partial X_{j,a,t}^{Beq}}{\partial D_{j,a,t}}=\frac{\partial V_{j,a,t}^{Beq}}{\partial B_{j,a,t}}\underbrace{p_{t}^{D}\left(1-\mu_{j,a,t}\right)}_{\frac{\partial f_{j,a,t}}{\partial D_{j,a,t}}}
\]

\end_inset


\end_layout

\begin_layout Subsubsection
Utility of Wealth
\end_layout

\begin_layout Standard
Similarly to the bequest function, the utility of wealth is
\begin_inset Formula 
\begin{equation}
V_{j,a,t}^{Wealth}=\xi_{j,a,t}^{Wealth}\frac{\left[X_{j,a,t}^{Wealth}\right]^{1-\eta}}{1-\eta}\label{eq:v_beq-1-1}
\end{equation}

\end_inset

where the elasticity 
\begin_inset Formula $\eta$
\end_inset

 is the same as in the utility and bequest functions.
 We define the interior object, 
\begin_inset Formula $X^{Wealth}$
\end_inset

, as
\begin_inset Formula 
\[
X_{j,a,t}^{Wealth}\equiv\frac{B_{j,a,t}+p_{t}^{D}\left(1-\mu_{j,a,t}\right)D_{j,a,t}+V_{j,a,t}^{PensionW}}{p_{t+1}^{c}}-\xi^{0}
\]

\end_inset

with the difference relative to bequests being the absence of the inheritance
 tax and the composition of the pension entitlement.
\end_layout

\begin_layout Standard
Note that we do not account for transaction costs incurred in liquidating
 or trading houses (or other assets) in our utility objects, 
\begin_inset Formula $X_{j,a,t}^{Wealth}$
\end_inset

 or 
\begin_inset Formula $X_{j,a,t}^{Beq}$
\end_inset

.
\end_layout

\begin_layout Standard
The pension entitlements inside bequest utility and wealth utility differ.
 Regarding bequest utility, some pension plans cease at death.
 In contrast, others contain an insurance element and continue to pay descendant
s.
 
\begin_inset Formula $V_{a,t}^{PensionB}$
\end_inset

 is the amount from pensions paid to descendants in case of death.
 Regarding utility from wealth, once households reach a certain age, they
 can freely choose the payout schedule from 'Kapitalpension' and 'aldersopsparin
g'.
 Many choose to withdraw at the latest possible date, 20 years after retirement,
 when the whole amount is paid out at once.
 Note that we do not pay out the whole amount at once for HtM agents, as
 that would imply a jump in consumption not observed in data.
 Therefore, these pension types are close to stocks and bonds in terms of
 liquidity.
 They are therefore treated the same way in the utility function, so we
 do not get an unreasonable jump in utility when the whole amount is converted
 to other assets 20 years after retirement.
 Therefore the object 
\begin_inset Formula $V_{a,t}^{PensionW}$
\end_inset

 differs from the bequest utility pension object.
\end_layout

\begin_layout Subsubsection

\series bold
Disutility of house price changes.
\end_layout

\begin_layout Standard
To better account for house price momentum (positive autocorrelation in
 price changes), we introduce a disutility of house price changes that captures
 various factors affecting buyers' and sellers' decisions.
 This price momentum can be micro-founded in various ways following the
 literature on house price sensitivity.
 For example, when selling a house, reference price utility, as described
 in Barberis and Xiong (2012), leads households to experience disutility
 from selling below the purchase price.
 Sellers may also be loss-averse in reference pricing, incentivizing them
 to hold house prices higher for longer than optimal given actual demand,
 in order to avoid the marginal loss discontinuity at the reference point.
 Additionally, demand concavity, as observed in Guren (2018), means that
 if prices fall below a certain threshold, demand does not increase (since
 households typically only need one house).
 Finally, downsizing aversion, due to financial constraints such as the
 need for a down-payment on a new house, as described in Stein (1995), may
 further discourage sellers from lowering their prices.
 These effects have been shown to be important in Danish data on the seller
 side, as documented in Andersen et al.
 (2022).
 On the other hand, for buyers, recent sale prices and expected profits
 may serve as reference points for making purchasing decisions.
 Bao and Saunders (2021) found, based on micro-data from the UK housing
 market, that buyers use these reference points to guide their purchase
 behavior.
 We aim to capture these various incentives in the following way; 
\end_layout

\begin_layout Standard
We let the functional form of this disutility be
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\tilde{V}(\Pi_{t}^{D},\Pi_{t-1}^{D},D_{j,a,t})=\Psi_{t}^{D}D_{j,a,t}=\left[\Xi\left(\Pi_{t}^{D},\Pi_{t-1}^{D}\right)-\beta_{j}2\Xi\left(\Pi_{t+1}^{D},\Pi_{t}^{D}\right)\right]D_{j,a,t}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
with
\begin_inset Formula 
\begin{equation}
\Xi\left(\Pi_{t}^{D},\Pi_{t-1}^{D}\right)=\mu_{pd}\left(\left[\frac{\Pi_{t}^{D}}{\Pi_{t-1}^{D}}-1\right]\frac{\Pi_{t}^{D}}{\Pi_{t-1}^{D}}\right)
\end{equation}

\end_inset

where 
\begin_inset Formula $\Pi_{t}^{D}\equiv P_{t}^{D}/P_{t-1}^{D}$
\end_inset

 is gross house price inflation and the parameter 
\begin_inset Formula $\mu_{pd}$
\end_inset

 is a scaling constant.
\end_layout

\begin_layout Standard
The household takes prices as given so that only the additional term 
\begin_inset Formula $\Psi_{j,a,t}^{D}$
\end_inset

 will appear in the first order condition for optimal housing choice.
\end_layout

\begin_layout Subsubsection
Differentiating with respect to housing
\end_layout

\begin_layout Standard
In the housing first order condition we have the object
\begin_inset Formula 
\[
U_{j,a,t}^{d}+\beta_{j}s_{a,t}\frac{\partial U_{j,a+1,t+1}}{\partial D_{j,a,t}}
\]

\end_inset

and it is useful to make this expression explicit here.
 The first element is the contemporaneous derivative
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
U_{j,a,t}^{d} & =\left[\tilde{U}_{j,a,t}\right]^{-\eta}\cdot\frac{\partial\tilde{U}_{j,a,t}}{\partial D_{j,a,t}}-\frac{\partial\tilde{V}_{j,a,t}}{\partial D_{j,a,t}}\\
 & =\left[\tilde{U}_{j,a,t}\right]^{\frac{1}{E}-\eta}\left[\frac{\upsilon_{j,a,t}^{d}}{D_{j,a,t}}\right]^{\frac{1}{E}}\frac{1}{\zeta_{a,t}}-\Psi_{t}^{D}
\end{align*}

\end_inset

while the second is the derivative in the future with respect to the lagged
 value
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\frac{\partial U_{j,a+1,t+1}}{\partial D_{j,a,t}} & =\left[\tilde{U}_{j,a+1,t+1}\right]^{-\eta}\cdot\frac{\partial\tilde{U}_{j,a+1,t+1}}{\partial D_{j,a,t}}\\
 & =-\frac{\chi^{D}}{\zeta_{a,t}}\left[\tilde{U}_{j,a+1,t+1}\right]^{\frac{1}{E}-\eta}\left[\frac{\upsilon_{a+1,t+1}^{d}}{D_{j,a,t}}\right]^{\frac{1}{E}}
\end{align*}

\end_inset


\end_layout

\begin_layout Subsection
Consumption components
\begin_inset CommandInset label
LatexCommand label
name "sec:Consumption components"

\end_inset


\end_layout

\begin_layout Standard
At the top of the household utility function we have two components: owned
 housing and the non-housing consumption aggregate.
 Owned housing is a single good with no sub-components but non-housing consumpti
on aggregates many elements through a CES tree structure.
 Note, however, that rental housing is not an element in the CES tree, but
 instead it is an exogenous element in the budget constraint of the household.
\end_layout

\begin_layout Standard
The optimal choice of total consumption, savings, and housing, is described
 above in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:The-household-problem"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 In this section we detail the determination of the components of total
 non-housing consumption, 
\begin_inset Formula $C_{j,a,t}$
\end_inset

.
 The first decomposition of this object contains five different components.
 Household demand for these five consumption components is a part of total
 demand for output from the nine domestic sectors as well as for imported
 goods, a process described in the input/output chapter.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
c\in\{\text{cars, energy, goods, tourism, services}\}
\]

\end_inset


\end_layout

\begin_layout Subsubsection
The nested consumption components
\end_layout

\begin_layout Standard
Within the utility function the different non-housing consumption components
 come together in the following CES nest structure, where the uppermost
 aggregate for an agent of type 
\begin_inset Formula $j$
\end_inset

, aged 
\begin_inset Formula $a$
\end_inset

 at time 
\begin_inset Formula $t$
\end_inset

 is 
\begin_inset Formula $C_{j,a,t}$
\end_inset

.
 To keep the model tractable and due to data limitations, we assume that
 all agents have identical preferences for different types of non-housing
 consumption.
 We can therefore aggregate individual agent non-housing consumption as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
C_{t}^{CEGTS}=\sum_{j}\sum_{a}C_{j,a,t}
\]

\end_inset


\end_layout

\begin_layout Standard
before moving on to the CES nest structure:
\end_layout

\begin_layout Standard
\align center

\size small
\begin_inset Formula $\xymatrix{C_{t}^{CEGTS}\ar@{-}[dr]\ar@{-}[d]\\
C_{\text{cars},t} & C_{t}^{EGTS}\ar@{-}[dr]\ar@{-}[d]\\
 & C_{\text{energy},t} & C_{t}^{GTS}\ar@{-}[dr]\ar@{-}[d]\\
 &  & C_{\text{goods},t} & C_{t}^{TS}\ar@{-}[dr]\ar@{-}[d]\\
 &  &  & C_{\text{tourism},t} & C_{\text{services},t}
}
($
\end_inset


\end_layout

\begin_layout Standard
Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Upper-Tree-Elasticities"
plural "false"
caps "false"
noprefix "false"

\end_inset

 shows the estimated elasticities in each of these nests (Kronborg & Kastrup,
 2020).
\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Upper Tree Elasticities (
\begin_inset Formula $\eta$
\end_inset

) 
\begin_inset CommandInset label
LatexCommand label
name "tab:Upper-Tree-Elasticities"

\end_inset


\end_layout

\end_inset


\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="2">
<features booktabs="true" islongtable="true" longtabularalignment="center">
<column alignment="center" valignment="middle" width="0pt">
<column alignment="center" valignment="middle" width="0pt">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\eta$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $C$
\end_inset

 and Housing
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.3
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Cars and 
\begin_inset Formula $C^{EGTS}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.2
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Energy and 
\begin_inset Formula $C^{GTS}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.0
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Goods and 
\begin_inset Formula $C^{TS}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.7
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Tourism and services
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.1
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
CES optimization
\end_layout

\begin_layout Standard
The approach of nested CES cost minimization is described in detail in the
 production chapter.
 The problem here is identical, only simpler as there are no extra elements
 such as technological progress or variable utilization multiplying consumption
 quantities.
 We can summarize the problem at every level of the consumption tree as
 follows
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\begin{array}{ccc}
\text{Utility} & \Rightarrow & C^{ij}=\left[\left(\mu^{i}\right)^{\frac{1}{\eta}}\left(C^{i}\right)^{\frac{\eta-1}{\eta}}+\left(\mu^{j}\right)^{\frac{1}{\eta}}\left(C^{j}\right)^{\frac{\eta-1}{\eta}}\right]^{\frac{\eta}{\eta-1}}\\
\\
\text{Derivative} & \Rightarrow & \frac{\partial C^{ij}}{\partial C^{i}}=\left(\mu^{i}\frac{C^{ij}}{C^{i}}\right)^{\frac{1}{\eta}}\\
\\
\text{Demand/F.O.C.} & \Rightarrow & C^{i}=\mu^{i}C^{ij}\left(\frac{P^{ij}}{p^{i}}\right)^{\eta}\\
\\
\text{Constraint} & \Rightarrow & P^{ij}C^{ij}=p^{i}C^{i}+p^{j}C^{j}\\
\\
\text{CES Price} & \Rightarrow & P^{ij}=\left[\mu^{i}\left(p^{i}\right)^{1-\eta}+\mu^{j}\left(p^{j}\right)^{1-\eta}\right]^{\frac{1}{1-\eta}}
\end{array}
\]

\end_inset


\end_layout

\begin_layout Standard
Here the 
\begin_inset Formula $\mu$
\end_inset

 are scale parameters, and the 
\begin_inset Formula $\eta$
\end_inset

 are elasticities.
\end_layout

\begin_layout Subsubsection
Tourism
\end_layout

\begin_layout Standard
There are both imports and exports of tourism.
 Imports of tourism consist of how much Danish households consume abroad
 and are given by the demand component 
\begin_inset Formula $C_{\text{tourism},t}$
\end_inset

 from the tree above.
 This is a regular consumption good and its demand increases with income.
 Exports of tourism are determined in the exports chapter and its aggregate
 is 
\begin_inset Formula $X_{\text{tourism},t}$
\end_inset

.
 The consumption of foreign tourists in Denmark is also divided into consumption
 groups in the export chapter and is given by 
\begin_inset Formula $C_{c,t}^{Tourist}$
\end_inset

.
\end_layout

\begin_layout Standard
Total consumption of goods type 
\begin_inset Formula $c$
\end_inset

 in Denmark is the sum of Danish households' consumption and tourists' consumpti
on in Denmark:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{c,t}^{CDK}C_{c,t}^{DK}=P_{c,t}^{C}C_{c,t}+P_{c,t}^{CTourist}C_{c,t}^{Tourist}
\]

\end_inset


\end_layout

\begin_layout Standard
The input/output system is based on deliveries from the 9 production sectors
 to demand groups (see input/ouput chapter).
 The demand groups for consumption include tourists' consumption, 
\begin_inset Formula $C_{c,t}^{DK}$
\end_inset

.
\end_layout

\begin_layout Standard
Whereas in the model Danes and tourists face the same prices for the same
 goods, in order to match the data they cannot face the same price for the
 same consumption components.
 We therefore use an adjustment factor
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{c,t}^{CTourist}=\lambda_{c,t}^{pCTourist}P_{c,t}^{C}
\]

\end_inset

where 
\begin_inset Formula $\lambda_{c,t}^{pCTourist}$
\end_inset

 is a parameter used to fit the data.
 It is assumed that this price margin remains constant going forward.
\end_layout

\begin_layout Standard
The value of aggregate Danish consumption does not include the consumption
 of foreign tourists in Denmark (as these are counted as exports).
\end_layout

\begin_layout Standard
\begin_inset Branch HouseholdsVariables
inverted 0
status collapsed

\begin_layout Subsection
Households variables
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Households variables
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
arrayrulecolor{white}
\end_layout

\end_inset


\begin_inset Tabular
<lyxtabular version="3" rows="11" columns="3">
<features islongtable="true" longtabularalignment="center">
<column alignment="center" valignment="middle" width="33text%">
<column alignment="center" valignment="middle" width="33text%">
<column alignment="center" valignment="middle" width="33text%">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{MAKRO}
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\color white
Endogenous variable
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\color white
Code name
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset

 Savings
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula 
\[
B_{j,a,t}
\]

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
vHhx, vHhxR, vHhxHtm
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset

 Consumption
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula 
\[
c_{j,a,t}
\]

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
qCR, qCHtM
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset

 Marginal rate of return
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula 
\[
\overline{r}_{t}^{B}
\]

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
mrHhxAfk
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset

 Marginal utility of housing
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula 
\[
U_{j,a,t}^{d}
\]

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
mUBolig[a,t]
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset

 User cost of housing
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula 
\[
p_{j,a,t}^{ucD}
\]

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
pBoligUC[a,t]
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset

 Auxiliary variable for calculating expenses related to owner-occupied housing
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula 
\[
f\left(D_{j,a,t},D_{j,a-1,t-1}\right)
\]

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
vBoligUdgiftR[a,t], vBoligUdgiftHtM[a,t]
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset

 Pension wealth of households
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula 
\[
B_{i,j,a,t}^{P}
\]

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
vHh[pens,a,t]
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset

 The aggregate pension wealth of the households
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula 
\[
B_{a,t}^{P}
\]

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
vHh['Pens',a,t]
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset

 Pension contributions from households
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula 
\[
y_{i,a,t}^{PC}
\]

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
vHhPensIndb[portf_,a_,t]
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset

 Pension payments to households
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula 
\[
y_{i,a,t}^{PY}
\]

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
vHhPensUdb[portf_,a_,t]
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="3">
<features islongtable="true" longtabularalignment="center">
<column alignment="center" valignment="middle" width="33text%">
<column alignment="center" valignment="middle" width="33text%">
<column alignment="center" valignment="middle" width="33text%">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset

 Assets of a specific type k held by pension funds
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $A_{k,t}^{P}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
vPension[akt,t]
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset

 Interest rate on pension wealth
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula 
\[
r_{t}^{P}
\]

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
rRente['Pens',t]
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset

 Reevaluation rate on pension wealth
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula 
\[
r_{t}^{RP}
\]

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
rOmv['Pens',t]
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset

 Auxiliary variable for the first-order condition utility of bequests
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula 
\[
X_{j,a,t}^{Beq}
\]

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
qArvBase[a,t]
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $TR_{a,t}^{P,i}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
vHhPensAfk[pens,a,t]
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset

 Derivative of wealth utility with respect to net assets
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula 
\[
\frac{\partial V_{j,a,t}^{Wealth}}{\partial B_{j,a,t}}
\]

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dFormue[a,t]
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
rowcolor{GRAY}
\end_layout

\end_inset

 Derivative of bequest utility with respect to net assets
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula 
\[
\frac{\partial V_{j,a,t}^{Beq}}{\partial B_{j,a,t}}
\]

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dArv[a,t]
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Appendices
\end_layout

\begin_layout Standard
In the following appendices the emphasize is on the derivation of parts
 of the model.
 To make for easier reading we generally omit the type index 
\begin_inset Formula $j$
\end_inset

.
\end_layout

\begin_layout Subsubsection
Calculating the bequest allocation matrix
\begin_inset CommandInset label
LatexCommand label
name "subsec:Calculating-the-bequest"

\end_inset


\end_layout

\begin_layout Standard
This section follows Boserup, Kopczuk, and Kreiner (2016).
 Households take bequests received as exogenous and these enter the budget
 constraint as an additive term which is 
\begin_inset Quotes eld
\end_inset

hidden
\begin_inset Quotes erd
\end_inset

 inside the income variable.
 Even if agents receive bequests in the first period of economic life (age
 18), we still have the initial condition for assets that 
\series bold

\begin_inset Formula $B_{0,t}$
\end_inset


\series default
 is taken as given by the agent, as we exogenize transfers associated with
 children.
\end_layout

\begin_layout Standard
An individual of any given age receives bequests from agents deceased also
 at any given age.
 The distribution of bequests is modeled through a time varying matrix 
\begin_inset Formula $M_{t}(a_{d},a_{h})$
\end_inset

 where the indices refer respectively to the age of the deceased and to
 the age of the heir.
 This allocation matrix is general in that it encompasses all deaths, not
 just deaths of parents or grandparents, and all heirs.
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
The sample is larger than in Boserup, Kopczuk, and Kreiner, (2016).
 Nearly everyone who dies has a son or daughter, a parent, a nephew or niece,
 an uncle, etc.
 Therefore, unaccounted would be only those who die alone yet have substantial
 assets to distribute.
\end_layout

\end_inset

 As an example, children also die and leave assets to their parents and
 siblings.
\end_layout

\begin_layout Standard
When an individual dies in the model, he leaves a bequest.
 Assume that the individual dies at age 
\begin_inset Formula $a_{d}$
\end_inset

.
 The distribution matrix 
\begin_inset Formula $M_{t}(a_{d},a_{h})$
\end_inset

, describes the share of his bequest going to an average 
\begin_inset Formula $a_{h}$
\end_inset

 year old individual.
 A given fraction of his wealth which he leaves as bequest is distributed
 equally by all agents of age 
\begin_inset Formula $a_{h}$
\end_inset

.
\end_layout

\begin_layout Paragraph

\series bold
The distribution matrix.
\end_layout

\begin_layout Standard
The matrix 
\begin_inset Formula $M_{t}(a_{d},a_{h})$
\end_inset

 is based on estimates of individual bequests from Danish administrative
 data.
 These estimates are obtained using a difference-in-difference estimator.
 This measures how the difference in wealth of an individual of age 
\begin_inset Formula $a_{h}$
\end_inset

, whose relative of age 
\begin_inset Formula $a_{d}$
\end_inset

 has died, differs from the the difference in wealth of the average person
 of age 
\begin_inset Formula $a_{h}$
\end_inset

.
 This results in estimates of several specific bequests from 
\begin_inset Formula $a_{d}$
\end_inset

 year old individuals to 
\begin_inset Formula $a_{h}$
\end_inset

 year old individuals.
 Let 
\begin_inset Formula $i$
\end_inset

 be the index for each specific transfer from an 
\begin_inset Formula $a_{d}$
\end_inset

 year old to an 
\begin_inset Formula $a_{h}$
\end_inset

 year old.
 
\begin_inset Formula $\widetilde{H}_{a_{d},a_{h},i,t}$
\end_inset

 is then the estimated nominal amount transferred for each specific transfer.
 These bequests given by individuals in age group 
\begin_inset Formula $a_{d}$
\end_inset

 to individuals in age group 
\begin_inset Formula $a_{h}$
\end_inset

 are then summed and divided by the total number of 
\begin_inset Formula $a_{d}$
\end_inset

 and 
\begin_inset Formula $a_{h}$
\end_inset

 year olds (not just the ones involved in estimated bequest transfers but
 all individuals).
 The result is a data frame containing the average bequest 
\begin_inset Formula $H_{a_{d},a_{h},t}$
\end_inset

 received by an 
\begin_inset Formula $a_{h}$
\end_inset

 year old from an 
\begin_inset Formula $a_{d}$
\end_inset

 year old, regardless of whether a relative has died,
\begin_inset Formula 
\[
H_{a_{d},a_{h},t}=\frac{1}{N_{a_{h},t}N_{a_{d},t}}\left[\underbrace{\sum_{i}\widetilde{H}_{a_{d},a_{h},i,t}}_{\text{All transfers \ensuremath{a_{d}}to \ensuremath{a_{h}}}}\right]
\]

\end_inset

where 
\begin_inset Formula $N_{x,t}$
\end_inset

 is the number of people of age group 
\begin_inset Formula $x$
\end_inset

.
 The age groups range from 0 to 100 and the time span is from 2000 to 2012.
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Note that age zero in the data corresponds to index 1 of age in the model.
\end_layout

\end_inset

 The average bequest given/left by an individual from age group 
\begin_inset Formula $a_{d}$
\end_inset

 is then given by 
\begin_inset Formula 
\[
H_{a_{d},t}=\sum_{a_{h}}H_{a_{d},a_{h},t}N_{a_{h},t}=\frac{1}{N_{a_{d},t}}\left[\underbrace{\sum_{a_{h}}\left(\sum_{i}\widetilde{H}_{a_{d},a_{h},i,t}\right)}_{\text{All transfers \ensuremath{a_{d}}to all \ensuremath{a_{h}}}}\right]
\]

\end_inset


\end_layout

\begin_layout Standard
Due to the sparsity of these matrices, they are averaged over time
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
H_{a_{d}}=\frac{1}{T}\sum_{t}^{T}H_{a_{d},t},\,\,\,\,\,\,\,\,\,\,\,\,\,\,H_{a_{d},a_{h}}=\frac{1}{T}\sum_{t}^{T}H_{a_{d},a_{h},t}
\]

\end_inset


\end_layout

\begin_layout Standard
The share of an 
\begin_inset Formula $a_{d}$
\end_inset

 year old's bequests received by an 
\begin_inset Formula $a_{h}$
\end_inset

 year old is then 
\begin_inset Formula 
\[
\widetilde{\chi}_{a_{d},a_{h}}=\frac{H_{a_{d},a_{h}}}{H_{a_{d}}}
\]

\end_inset

This share contains a large amount of noise.
 We therefore conduct a non-parametric estimation, using a local linear
 regression with the age of both giver and receiver as dependent variables
 and a Gaussian kernel.
 
\begin_inset Formula $\widetilde{\chi}_{a_{d},a_{h}}$
\end_inset

 is then replaced by the fitted value 
\begin_inset Formula $\chi_{a_{d},a_{h}}$
\end_inset

.
 
\begin_inset Newline newline
\end_inset

Since 
\begin_inset Formula $\chi_{a_{d},a_{h}}$
\end_inset

 is time invariant, 
\begin_inset Formula $\chi_{a_{d},a_{h}}N_{a_{h},t}$
\end_inset

 will generally not sum to 1.
 This means that bequests given will not be the same as bequests received.
 To prevent this, the shares are normalized so that we finally obtain the
 allocation matrix
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
M_{t}\left(a_{d},a_{h}\right)=\frac{\chi_{a_{d},a_{h}}}{\sum_{a_{h}}\chi_{a_{d},a_{h}}N_{a_{h},t}}
\]

\end_inset


\end_layout

\begin_layout Standard
These have the desired property that
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\sum_{a_{h}}M_{t}\left(a_{d},a_{h}\right)N_{a_{h},t}=\frac{\sum_{a_{h}}\chi_{a_{d},a_{h}}N_{a_{h},t}}{\sum_{a_{h}}\chi_{a_{d},a_{h}}N_{a_{h},t}}=1
\]

\end_inset


\end_layout

\begin_layout Standard
Therefore total bequests given will equal total bequests received.
\end_layout

\begin_layout Paragraph

\series bold
Consistency.
\end_layout

\begin_layout Standard
Since people die at the end of a period the total bequest given by a deceased
 member of age group 
\begin_inset Formula $a_{d}$
\end_inset

, consists of his assets at the end of the period, which in the case of
 the model are net financial assets 
\begin_inset Formula $B_{a_{d},t}$
\end_inset

 and housing.
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
In the data the value of property is included in the wealth difference such
 that the allocation matrix we use is consistent with the model.
\end_layout

\end_inset

 Here we proceed using only net financial assets 
\begin_inset Formula $B$
\end_inset

 as an illustration.
 This means that the average bequest given by a member of age group 
\begin_inset Formula $a_{d}$
\end_inset

 is 
\begin_inset Formula $\left(1-s_{a_{d},t}\right)B_{a_{d},t}$
\end_inset

 where 
\begin_inset Formula $s_{a_{d},t}$
\end_inset

 is the survival rate, i.e.
 the probability of an 
\begin_inset Formula $a_{d}$
\end_inset

 year old also being alive at age 
\begin_inset Formula $a_{d}+1$
\end_inset

.
 Total bequests given by all age groups at the end of time 
\begin_inset Formula $t$
\end_inset

 after all decisions have been taken are then 
\begin_inset Formula 
\[
H_{t}=\sum_{a_{d}}\left(1-s_{a_{d},t}\right)B_{a_{d},t}N_{a_{d},t}
\]

\end_inset

Bequests are received in the next period.
 The average bequest from an 
\begin_inset Formula $a_{d}$
\end_inset

 year old deceased at the end of period 
\begin_inset Formula $t-1$
\end_inset

 received by an 
\begin_inset Formula $a_{h}$
\end_inset

 year old in period 
\begin_inset Formula $t$
\end_inset

 will therefore be
\begin_inset Formula 
\[
\left(1-s_{a_{d},t-1}\right)B_{a_{d},t-1}M_{t}\left(a_{d},a_{h}\right)
\]

\end_inset


\end_layout

\begin_layout Standard
The bequest received by a member of age group 
\begin_inset Formula $a_{h}$
\end_inset

 at time 
\begin_inset Formula $t$
\end_inset

 is then given by
\begin_inset Formula 
\[
H_{a_{h},t}=\sum_{a_{d}}\left(1-s_{a_{d},t-1}\right)B_{a_{d},t-1}M_{t}\left(a_{d},a_{h}\right)N_{a_{d},t-1}
\]

\end_inset


\end_layout

\begin_layout Standard
This in turn results in total bequests received being
\begin_inset Formula 
\begin{align*}
\sum_{a_{h}}H_{a_{h},t}N_{a_{h},t} & =\sum_{a_{h}}\left(\sum_{a_{d}}\left(1-s_{a_{d},t-1}\right)B_{a_{d},t-1}M_{t}\left(a_{d},a_{h}\right)N_{a_{d},t-1}\right)N_{a_{h},t}\\
= & \sum_{a_{h}}\left(\sum_{a_{d}}\left(1-s_{a_{d},t-1}\right)B_{a_{d},t-1}\frac{\chi_{a_{d},a_{h}}}{\sum_{a_{h}}\chi_{a_{d},a_{h}}N_{a_{h},t}}N_{a_{d},t-1}\right)N_{a_{h},t}\\
= & \sum_{a_{d}}\left(1-s_{a_{d},t-1}\right)B_{a_{d},t-1}\left(\sum_{a_{h}}\frac{\chi_{a_{d},a_{h}}N_{a_{h},t}}{\sum_{a_{h}}\chi_{a_{d},a_{h}}N_{a_{h},t}}\right)N_{a_{d},t-1}\\
= & \sum_{a_{d}}\left(1-s_{a_{d},t-1}\right)B_{a_{d},t-1}N_{a_{d},t-1}=H_{t-1}
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
so that total bequests given last period equal total bequests received this
 period
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
The amount actually available as disposable income for the receiver differs
 from the amount given due to transaction costs, taxes and interests payments.
\end_layout

\end_inset

.
\end_layout

\begin_layout Subsubsection
Estimating assets and Liabilities as functions of B
\begin_inset CommandInset label
LatexCommand label
name "subsec:Portfolio"

\end_inset


\end_layout

\begin_layout Standard
The model generates the net financial variable 
\begin_inset Formula $B$
\end_inset

 endogenously.
 In the data this quantity is made up of the sum of different assets (stocks,
 bonds and bank deposits) minus the sum of liabilities (bank debt), so that
 in gross term 
\begin_inset Formula $B=A-L$
\end_inset

.
 This decomposition of 
\begin_inset Formula $B$
\end_inset

 into assets and liabilities displays systematic patterns over the life
 cycle, and here we detail how to capture these features and use them in
 our model.
 We first look at a very simple example to highlight the approach.
\end_layout

\begin_layout Paragraph
Assets and Liabilities as functions of B
\end_layout

\begin_layout Standard
The exogenous portfolio composition is estimated from the data as in the
 following example with one asset and one liability.
 This allows us to take into account that 1) portfolios change with age
 and 2) portfolios change with the size of net-savings.
 Assets 
\begin_inset Formula $A_{a,t}$
\end_inset

 are related to net financial wealth 
\begin_inset Formula $B_{a,t}$
\end_inset

 through the equation
\begin_inset Formula 
\[
A_{a,t}=I_{A}+\lambda B_{a,t}
\]

\end_inset

and we have the same for liabilities
\begin_inset Formula 
\[
L_{a,t}=I_{L}+\phi B_{a,t}
\]

\end_inset

and here the quantities 
\begin_inset Formula $A_{a,t}$
\end_inset

 and 
\begin_inset Formula $B_{a,t}$
\end_inset

 are cohort averages, and therefore the quantities that apply to individual
 households.
\end_layout

\begin_layout Standard
Since 
\begin_inset Formula $A_{a,t}-L_{a,t}=B_{a,t}$
\end_inset

 we must have that our estimated parameters obey 
\begin_inset Formula $I_{L}=I_{A}$
\end_inset

 and 
\begin_inset Formula $\lambda-\phi=1$
\end_inset

.
 As it turns out these properties are ensured by the mechanics of OLS estimation.
 The OLS regressions are 
\begin_inset Formula $A=X\beta_{A}+\epsilon_{A}$
\end_inset

, and 
\begin_inset Formula $L=X\beta_{L}+\epsilon_{L}$
\end_inset

 where 
\begin_inset Formula $A$
\end_inset

 and 
\begin_inset Formula $L$
\end_inset

 are column vectors.
 Taking the estimator for assets, 
\begin_inset Formula $\hat{\beta}_{A}=(X'X)^{-1}X'A$
\end_inset

, and using the fact that 
\begin_inset Formula $A=B+L$
\end_inset

, we can write 
\begin_inset Formula $\hat{\beta}_{A}=(X'X)^{-1}X'B+\hat{\beta}_{L}$
\end_inset

.
 Here, since the matrix X has two column vectors, a column of ones and the
 vector B, the OLS algebra implies 
\begin_inset Formula 
\[
\hat{\beta}_{A}-\hat{\beta}_{L}=(X'X)^{-1}X'B=\left[\begin{array}{c}
0\\
1
\end{array}\right]
\]

\end_inset

In a regression 
\begin_inset Formula $A=X\beta+\epsilon$
\end_inset

 the OLS estimator of 
\begin_inset Formula $\beta$
\end_inset

 projected 
\begin_inset Formula $A$
\end_inset

 on the space generated by the columns of 
\begin_inset Formula $X$
\end_inset

, containing the vector 
\begin_inset Formula $B$
\end_inset

.
 Since 
\begin_inset Formula $A-L=B$
\end_inset

 the sum across equations of coefficients attached to B must be 1 and the
 sum of coefficients attached to any other variables must be 0, because
 the projection of B on B is exact.
 These properties extend to the case where the regressions have explanatory
 variables so that the matrix 
\begin_inset Formula $X$
\end_inset

 has more columns.
\end_layout

\begin_layout Standard
OLS is adequate as the relationships we are estimating are not behavioral.
 They are instead a way to capture the patterns observed in the data more
 accurately than just using averages as done in e.g.
 DREAM.
 For historical data we add the OLS error to the estimated regression so
 as to replicate the portfolio data exactly.
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
OLS is unbiased.
 A GLS estimator with weights given by population 
\begin_inset Formula $N_{a}$
\end_inset

 is more efficient in the presence of age related heteroeskedasticity.
 However, the error from this estimator, 
\begin_inset Formula $Y-X\hat{\beta}_{GLS}$
\end_inset

, no longer sums to zero.
\end_layout

\end_inset

 For forward looking simulation we leave the orthogonal error (which has
 mean zero across ages and across assets) out, and use the estimated parameters,
 plus endogenous 
\begin_inset Formula $B$
\end_inset

 and any other explanatory variables inside 
\begin_inset Formula $X$
\end_inset

 to generate a portfolio going forward.
 Note that the estimation procedure and the exact specification of these
 equations are agnostic (given the specification assumed) with respect to
 the data.
 There may be theoretical reasons to think portfolio composition should
 vary over the life cycle.
 If the data contains such heterogeneity, the estimated parameters will
 reflect that by having different values for different assets.
 In addition, the estimated portfolio is an optimal portfolio given the
 underlying assumption is that agents made optimal decisions that resulted
 in what we observe.
\end_layout

\begin_layout Paragraph
General Structure
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
In the following we suppress the index for household type and implicitly
 aggregate over types.
 Whenever we sum over age, 
\begin_inset Formula $\sum_{a}$
\end_inset

, in the translation to the model, we also sum out type heterogeneity using
 
\begin_inset Formula $\sum_{j}\Upsilon_{j}$
\end_inset

.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
For several asset types 
\begin_inset Formula $i$
\end_inset

, and liability types 
\begin_inset Formula $j$
\end_inset

, we have at any given moment 
\begin_inset Formula $t$
\end_inset

:
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
We only run regressions along the age dimension.
 When data allows we will look into panel estimation.
\end_layout

\end_inset


\begin_inset Formula 
\[
A_{a,t}^{i}=I_{a,t}^{i}+\lambda_{t}^{i}B_{a,t}
\]

\end_inset


\begin_inset Formula 
\[
L_{a,t}^{j}=I_{a,t}^{j}+\phi_{t}^{j}B_{a,t}
\]

\end_inset

where 
\begin_inset Formula $I_{a,t}^{i}$
\end_inset

 and 
\begin_inset Formula $I_{a,t}^{j}$
\end_inset

 are the intercept functions for each age and 
\begin_inset Formula $(\lambda_{t}^{i},\phi_{t}^{j})$
\end_inset

 are the parameters associated with net assets.
 The intercept terms 
\begin_inset Formula $I_{a,t}$
\end_inset

 are general functions of age and of auxiliary variables with population,
 aggregate net assets 
\begin_inset Formula $B$
\end_inset

, and another macroeconomic variable 
\begin_inset Formula $Q$
\end_inset

 as a scaling factors.
 With a first order polynomial in age and with one auxiliary variable 
\begin_inset Formula $z$
\end_inset

 the intercept is as follows
\begin_inset Formula 
\[
I_{a,t}^{i,j}=I_{0,t}^{i,j}\left[\frac{Q_{t}}{N_{t}}\right]+I_{1,t}^{i,j}\left[\frac{Q_{t}}{S_{t}^{a}}\right]a+I_{z,t}^{i,j}Z_{a,t}
\]

\end_inset

with 
\begin_inset Formula $N_{t}=\sum_{a}N_{a,t}$
\end_inset

, and 
\begin_inset Formula $S_{t}^{a}=\sum_{a}N_{a,t}\cdot a$
\end_inset

, and 
\begin_inset Formula $B_{t}=\sum_{a}N_{a,t}B_{a,t}$
\end_inset

 and 
\begin_inset Formula $Z_{t}=\sum_{a}N_{a,t}Z_{a,t}$
\end_inset

.
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Because we have constrained and unconstrained agents the overall aggregates
 are 
\begin_inset Formula $B_{t}=\sum_{j,a}N_{a,t}\left\{ \Upsilon_{j}B_{j,a,t}\right\} $
\end_inset

 and 
\begin_inset Formula $D_{t}=\sum_{j,a}N_{a,t}\left\{ \Upsilon_{j}D_{j,a,t}\right\} $
\end_inset

.
 Note that impatient households only have non zero 
\begin_inset Formula $B$
\end_inset

 in the response to a shock.
\end_layout

\end_inset

 The object 
\begin_inset Formula $Q_{t}$
\end_inset

 is a macro variable.
 We can also have several 
\begin_inset Formula $Z_{t}$
\end_inset

 variables to fit the portfolio.
\end_layout

\begin_layout Paragraph
Homogeneity
\end_layout

\begin_layout Standard
We now briefly drop the time subscript.
 In OLS regression terminology, the objects Y and X are (for asset 
\begin_inset Formula $i$
\end_inset

) given by 
\begin_inset Formula $Y=\left[A_{a}^{i}\right]$
\end_inset

 with 
\begin_inset Formula $X$
\end_inset

 containing four column variables (intercept, age, Z, and B) with as many
 rows as ages 
\begin_inset Formula $a$
\end_inset

:
\begin_inset Formula 
\[
X=\left[\begin{array}{cccc}
\frac{Q}{N}, & \frac{Q}{S^{a}}a, & Z_{a}, & B_{a}\end{array}\right]
\]

\end_inset

The way the intercept terms are defined plays a role in ensuring homogeneity
 of degree 1 in the model.
 Homogeneity of degree 1 is ensured if, when increasing all exogenous variables
 by a common factor 
\begin_inset Formula $\varLambda$
\end_inset

, the model yields all endogenous variables factored by the same 
\begin_inset Formula $\varLambda$
\end_inset

 such that no relative quantities change.
 Consider the equation for asset 
\begin_inset Formula $A^{i}$
\end_inset

 and aggregate over all ages 
\begin_inset Formula $a$
\end_inset

 and all households 
\begin_inset Formula $N_{a}$
\end_inset

 .
 Inserting the intercept we have
\begin_inset Formula 
\[
\sum_{a}N_{a}A_{a}^{i}=\sum_{a}N_{a}\left\{ I_{0}^{i}\left[\frac{Q}{N}\right]+I_{1}^{i}\left[\frac{Q}{S^{a}}\right]a+I_{z}^{i}Z_{a}\right\} +\lambda^{i}\sum_{a}N_{a}B_{a}
\]

\end_inset

which, after canceling terms, yields
\begin_inset Formula 
\[
\frac{A^{i}}{B}=\left[\left(I_{0}^{i}+I_{1}^{i}\right)\frac{Q}{B}+I_{z}^{i}\frac{Z}{B}+\lambda^{i}\right]
\]

\end_inset

The portfolio structure only needs to ensure the homogeneity of aggregate
 (sum over all individuals and all cohorts) assets and liabilities with
 respect to 
\begin_inset Formula $B$
\end_inset

.
 The rest of the MAKRO model must then ensure that 
\begin_inset Formula $B$
\end_inset

 is homogeneous with respect to all other variables.
 Since 
\begin_inset Formula $Q$
\end_inset

 is a macro variable introduced as a scaling factor, the long-run portfolio
 composition is constant as long as MAKRO preserves the ratio 
\begin_inset Formula $Q/B$
\end_inset

.
 The same is true for the ratio 
\begin_inset Formula $Z/B$
\end_inset

.
 However, policy interventions or structural changes that affect the long-run
 ratios 
\begin_inset Formula $Q/B$
\end_inset

 and 
\begin_inset Formula $Z/B$
\end_inset

 will affect long-run portfolio compositions.
 Of particular note are the scaling objects 
\begin_inset Formula $N$
\end_inset

 and 
\begin_inset Formula $S^{a}$
\end_inset

, which ensure that the portfolio is homogeneous with respect to population
 size.
\end_layout

\begin_layout Paragraph
Housing
\end_layout

\begin_layout Standard
We include housing in the auxiliary variable Z in the regression since it
 is a key determinant of non-mortgage bank debt.
 Note that we implement the portfolio with one short-run deviation from
 the estimated model: a slow-moving house price instead of the market clearing
 price.
 We now detail the algebra associated with these features.
 Consider the equation for some asset 
\begin_inset Formula $i$
\end_inset

.
 It is estimated as
\begin_inset Formula 
\[
N_{a,t}A_{a,t}^{i}=N_{a,t}\left\{ I_{0}^{i}\left[\frac{Q_{t}}{N_{t}}\right]+I_{1}^{i}\left[\frac{Q_{t}}{S_{t}^{a}}\right]a+I_{d}^{i}\cdot p_{t}^{D}D_{a,t}+\lambda^{i}B_{a,t}\right\} 
\]

\end_inset

and aggregation 
\begin_inset Formula $\sum_{a}N_{a,t}A_{a,t}^{i}=A_{t}^{i}$
\end_inset

 implies (where 
\begin_inset Formula $p_{t}^{D}D_{t}$
\end_inset

 is total housing)
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
The actual estimated equation multiplies both sides of this equation by
 population 
\begin_inset Formula $N_{a,t}$
\end_inset

.
 In addition, the scaling objects 
\begin_inset Formula $Q_{t}$
\end_inset

, 
\begin_inset Formula $N_{t},$
\end_inset

and 
\begin_inset Formula $S_{t}^{a}$
\end_inset

 are implicit as constants mutiplying the variables so that the actual coefficie
nts 
\begin_inset Formula $(I_{0}^{i},I_{1}^{i})$
\end_inset

 are recovered ex post by inversion.
 For example for the intercept we estimate 
\begin_inset Formula $\hat{\beta}_{0}^{i}$
\end_inset

 and then recover 
\begin_inset Formula $\hat{I}_{0}^{i}=(N_{t}/Q_{t})\hat{\beta}_{0}^{i}$
\end_inset

.
\end_layout

\end_inset


\begin_inset Formula 
\[
A_{t}^{i}=\left\{ I_{0}^{i}+I_{1}^{i}\right\} Q_{t}+I_{d}^{i}\left[p_{t}^{D}D_{t}\right]+\lambda^{i}B_{t}
\]

\end_inset


\begin_inset Formula 
\[
A_{a,t}^{i}=I_{0}^{i}\left[\frac{Q_{t}}{N_{t}}\right]+I_{1}^{i}\left[\frac{Q_{t}}{S_{t}^{a}}\right]a+I_{d}^{i}\cdot\left[X_{t}\cdot\bar{p}_{t}^{D}D_{a,t}\right]+\lambda^{i}B_{a,t}
\]

\end_inset

The house price 
\begin_inset Formula $\bar{p}_{t}^{D}$
\end_inset

 attached to 
\begin_inset Formula $D_{a,t}$
\end_inset

 in this equation is the same for all ages and therefore just scales the
 estimated parameter 
\begin_inset Formula $I_{d}^{i}$
\end_inset

.
 As we implement this equation we define this price as a moving average:
 
\begin_inset Formula $\bar{p}_{t}^{D}=\left(1-\kappa^{PD}\right)p_{t}^{D}+\kappa^{PD}\bar{p}_{t-1}^{D}$
\end_inset

 where 
\begin_inset Formula $p_{t}^{D}$
\end_inset

 is the realized house price.
 In the long run 
\begin_inset Formula $\bar{p}_{t}^{D}=p_{t}^{D}$
\end_inset

.
\end_layout

\begin_layout Standard
The marginal return on housing is 
\begin_inset Formula $I_{d}^{i}\cdot X_{t}\bar{p}_{t}^{D}$
\end_inset

, and with all assets and liabilities
\begin_inset Formula 
\[
\bar{r}_{t}^{D}=\bar{p}_{t}^{D}\left(\sum_{i}r_{t}^{i}I_{d,t-1}^{i}-\sum_{i}r_{t}^{j}I_{d,t-1}^{j}\right)
\]

\end_inset

Aggregation and long run properties, however, require some adjustment.
 As we aggregate 
\begin_inset Formula $\sum_{a}N_{a,t}A_{j,a,t}^{i}=A_{t}^{i}$
\end_inset

 the intercept and the age term become
\begin_inset Formula 
\[
\sum_{a}N_{a,t}\left\{ I_{0}^{i}\left[\frac{Q_{t}}{N_{t}}\right]+I_{1}^{i}\left[\frac{Q_{t}}{S_{t}^{a}}\right]a\right\} =\left\{ I_{0}^{i}+I_{1}^{i}\right\} Q_{t}
\]

\end_inset

while the last term becomes simply 
\begin_inset Formula $B_{t}$
\end_inset

.
 Aggregating over population yields
\begin_inset Formula 
\[
I_{d}^{i}\sum_{a}N_{a,t}\bar{p}_{t}^{D}D_{j,a,t}=I_{d}^{i}\bar{p}_{t}^{D}D_{t}
\]

\end_inset

which means the aggregate portfolio obeys
\begin_inset Formula 
\[
A_{t}^{i}=\left(I_{0}^{i}+I_{1}^{i}\right)Q_{t}+I_{d}^{i}\left[\bar{p}_{t}^{D}D_{t}\right]+\lambda^{i}B_{t}
\]

\end_inset

so that homogeneity is a property determined by the ratio 
\begin_inset Formula $Q/B$
\end_inset

 and the ratio 
\begin_inset Formula $\frac{\bar{p}_{t}^{D}D_{t}}{B_{t}}$
\end_inset

.
\end_layout

\begin_layout Standard
Note that, as the entire household problem generates endogenous variation
 for 
\begin_inset Formula $B$
\end_inset

 and 
\begin_inset Formula $Z$
\end_inset

, the estimated portfolio model allows for endogenous variation of its constitue
nt parts which by design is an optimal portfolio adjustment.
 Note also that any sluggishness in portfolio adjustment relative to economic
 conditions is already included in the estimated equations, either through
 lower coefficients attached to explanatory variables or through a higher
 intercept.
 Finally, the presence of the constant term yields an estimation error which
 is orthogonal to the life cycle, a property which is useful in the forecasting
 role of the model.
\end_layout

\begin_layout Paragraph
Marginal return on 
\begin_inset Formula $B$
\end_inset


\end_layout

\begin_layout Standard
Given a portfolio structure we now must fit the budget constraint on historical
 data.
 The budget constraint with explicit assets and liabilities is
\begin_inset Formula 
\[
B_{a,t}=B_{a-1,t-1}+\underbrace{\left[\sum_{i}r_{t}^{i}A^{i}\left(B_{a-1,t-1}\right)-\sum_{j}r_{t}^{j}L^{j}\left(B_{a-1,t-1}\right)\right]}_{\text{Realized Total Return}}+...
\]

\end_inset

and, given 
\shape italic
observed/realized
\shape default
 rates of return, it is completely characterized.
 The realized return on assets is 
\begin_inset Formula 
\[
\underbrace{\left(\sum_{i}r_{t}^{i}I_{a-1,t-1}^{i}-\sum_{j}r_{t}^{j}I_{a-1,t-1}^{j}\right)}_{\text{intercept and attached rates}}+\underbrace{\left(\sum_{i}r_{t}^{i}\lambda_{t-1}^{i}-\sum_{j}r_{t}^{j}\phi_{t-1}^{j}\right)}_{\text{marginal return on B}}B_{a-1,t-1}
\]

\end_inset

where we note again that the parameters and intercept functions are timed
 in the same way as the underlying assets they describe, but the rates of
 return are timed one period forward.
\end_layout

\begin_layout Standard
The 
\series bold
marginal
\series default
 rate we are looking for in the Euler equation is then
\begin_inset Formula 
\[
R_{t}^{B}=1+\bar{r}_{t}^{B}=1+\left(\sum_{i}r_{t}^{i}\lambda_{t-1}^{i}-\sum_{j}r_{t}^{j}\phi_{t-1}^{j}\right)
\]

\end_inset

and 
\begin_inset Formula $\bar{r}_{t}^{B}$
\end_inset

 is not age dependent since the parameters 
\begin_inset Formula $\phi$
\end_inset

 and 
\begin_inset Formula $\lambda$
\end_inset

 are not age dependent and we assume that rates of return 
\begin_inset Formula $r_{t}^{i}$
\end_inset

 or 
\begin_inset Formula $r_{t}^{j}$
\end_inset

 on any assets and liabilities of unconstrained agents are not age related.
 Note that interest rates on bank debt may well be age related but we rule
 that out.
\end_layout

\begin_layout Paragraph
Marginal return on 
\begin_inset Formula $Z$
\end_inset


\end_layout

\begin_layout Standard
If the auxiliary variable 
\begin_inset Formula $Z$
\end_inset

 is endogenous there will be a marginal rate given by
\begin_inset Formula 
\[
\bar{r}_{t}^{Z}=\left(\sum_{i}r_{t}^{i}I_{z,t-1}^{i}-\sum_{i}r_{t}^{j}I_{z,t-1}^{j}\right)
\]

\end_inset

This is the case for housing.
 Since bank debt is related to housing purchases, we select the housing
 stock 
\begin_inset Formula $D_{a,t}$
\end_inset

 (or housing value 
\begin_inset Formula $V_{a,t}^{D}=P_{t}^{D}D_{a,t}$
\end_inset

) as an auxiliary variable 
\begin_inset Formula $Z_{a,t}$
\end_inset

.
 As the portfolio is related to the housing stock, the choice of housing
 now influences the savings decision through its impact on portfolio composition
 and returns.
 Note that as the household changes its decision on housing 
\begin_inset Formula $D$
\end_inset

 and on net financial assets 
\series bold

\begin_inset Formula $B$
\end_inset


\series default
, the portfolio adjusts within the model as the data suggests it should.
 This adjustment is still exogenous as optimal portfolio composition is
 implicit in the estimated parameters of the portfolio structure.
\end_layout

\begin_layout Standard
As shown above the additional marginal rate is 
\begin_inset Formula 
\[
\bar{r}_{t}^{D}=X_{t}\bar{p}_{t}^{D}\left(\sum_{i}r_{t}^{i}I_{d,t-1}^{i}-\sum_{i}r_{t}^{j}I_{d,t-1}^{j}\right)
\]

\end_inset

and is generally non zero, unless the rate of return on assets and liabilities
 is the same.
 It is also not age dependent.
 This marginal rate helps characterize the user cost of housing in more
 detail as the household faces mortgage interest costs on the mortgage part,
 but opportunity costs on the non mortgage part.
 These opportunity costs now reflect also the change in portfolio weight
 on bank debt when the volume of housing changes.
\end_layout

\begin_layout Paragraph
The user cost of housing
\begin_inset CommandInset label
LatexCommand label
name "subsec:The-user-cost"

\end_inset


\end_layout

\begin_layout Standard
We derived the expression
\begin_inset Formula 
\[
p_{j,a,t}^{ucD}=\underbrace{\left[\frac{\partial f_{j,a,t}}{\partial D_{j,a,t}}+\frac{1}{1+\overline{r}_{t+1}^{B}}\frac{\partial f_{j,a+1,t+1}}{\partial D_{j,a,t}}-\frac{R_{a+1,t+1}^{D}}{1+\overline{r}_{t+1}^{B}}\right]}_{\text{User Cost of \ensuremath{D_{a,t}} measured at time t.}}
\]

\end_inset

and with
\begin_inset Formula 
\[
1+\overline{r}_{t+1}^{B}\equiv1+\left(\sum_{i}r_{t+1}^{i}\lambda_{t}^{i}-\sum_{j}r_{t+1}^{j}\phi_{t}^{j}\right)
\]

\end_inset

where
\begin_inset Formula 
\[
R_{a+1,t+1}^{D}\equiv\bar{r}_{t+1}^{D}=\frac{B_{t}}{V_{t}^{D}}P_{t}^{D}\left(\sum_{i}r_{t+1}^{i}I_{d,t}^{i}-\sum_{i}r_{t+1}^{j}I_{d,t}^{j}\right)
\]

\end_inset

and we have
\begin_inset Foot
status open

\begin_layout Plain Layout
The parameters 
\begin_inset Formula $\lambda$
\end_inset

 and 
\begin_inset Formula $\phi$
\end_inset

 are in the code 
\begin_inset Formula $dvHh2dvHhx$
\end_inset

 and, in the code the 
\begin_inset Formula $I_{d,t}^{i}$
\end_inset

 and 
\begin_inset Formula $I_{d,t}^{j}$
\end_inset

 are called 
\begin_inset Formula $dvHh2dvBolig['asseti',t]$
\end_inset

 (inside the aldersprofiler.gms file).
\end_layout

\end_inset


\begin_inset Formula 
\[
USER_{a,t}=\underbrace{\left[\frac{\partial f_{j,a,t}}{\partial D_{j,a,t}}+\frac{1}{1+\overline{r}_{t+1}^{B}}\frac{\partial f_{j,a+1,t+1}}{\partial D_{j,a,t}}-\frac{B_{t}}{V_{t}^{D}}P_{t}^{D}\frac{\left(\sum_{i}r_{t}^{i}I_{d,t}^{i}-\sum_{i}r_{t}^{j}I_{d,t}^{j}\right)}{1+\left(\sum_{i}r_{t}^{i}\lambda^{i}-\sum_{j}r_{t}^{j}\phi^{j}\right)}\right]}_{\text{User Cost of \ensuremath{D_{a,t}} measured at time t.}}
\]

\end_inset


\end_layout

\begin_layout Paragraph
Shocks and data
\end_layout

\begin_layout Subparagraph
Shocks.
\end_layout

\begin_layout Standard
Each different asset or liability has its own return, and, in the absence
 of shocks to the model, realized and 
\begin_inset Quotes eld
\end_inset

expected
\begin_inset Quotes erd
\end_inset

 returns are identical.
 Since MAKRO is a perfect foresight model, when a shock occurs it changes
 the environment from one probability 1 scenario to a different probability
 1 scenario.
 In the impact period of the shock (and only then), domestic stock returns
 (and only those) will differ from 
\begin_inset Quotes eld
\end_inset

expected
\begin_inset Quotes erd
\end_inset

 returns.
 Realized returns are always included in the budget constraint.
 Expected returns (which obey arbitrage conditions in the absence of shocks)
 are always included in the intertemporal first-order conditions.
\end_layout

\begin_layout Subparagraph
Data.
\end_layout

\begin_layout Standard
As households in MAKRO are divided in 100 age groups, it is a requirement
 of the data set used to calibrate households that it contains data distributed
 across those age groups.
\begin_inset Foot
status open

\begin_layout Plain Layout
Reference: Christian P.
 Hoeck (2020).
 
\begin_inset Quotes eld
\end_inset

The creation of lifecycle profiles for households in MAKRO.
\begin_inset Quotes erd
\end_inset


\end_layout

\end_inset

 The tasks that MAKRO will be used for also require that the sum of the
 wealth profiles over age correspond to the totals found in the national
 accounts.
 Such a data set was not available prior to the creation of the MAKRO life-cycle
 profiles.
\end_layout

\begin_layout Standard
The administrative data used to create the wealth profiles is drawn from
 the Statistics Denmark's administrative data on wealth, with some additional
 data being drawn from the Lovmodel database.
 Aggregate data on wealth is drawn from national accounts.
 Returns are based on aggregate data and the portfolio composition implied
 by the created asset profiles.
\end_layout

\begin_layout Standard
The asset profiles are created using two steps: First, a correspondence
 between the administrative data and the asset structure in MAKRO is established.
 Most asset and liability types in MAKRO have clear correspondences to the
 administrative data.
 This includes bank debt, deposits, real estate, mortgages, and bonds.
 In MAKRO stocks are divided into foreign and domestic stocks, but Statistics
 Denmark's wealth data only contains information on the combined value of
 stocks.
 Data from the Lovmodel database is therefore used to divide the combined
 value of stocks into foreign and domestic stocks.
 In the second step, the asset and liability profiles are then scaled proportion
ately to match the aggregate values from the national accounts.
\end_layout

\begin_layout Standard
Rates of return are calculated based on aggregate values from the national
 accounts.
 Combining the rates of return with the created asset and liability age
 profiles results in age profiles for total return
\end_layout

\begin_layout Subsubsection
Land and housing depreciation
\begin_inset CommandInset label
LatexCommand label
name "subsec:Land-and-housing"

\end_inset


\end_layout

\begin_layout Standard
The housing 
\begin_inset Formula $D$
\end_inset

 the household owns is an aggregate object containing 
\begin_inset Quotes eld
\end_inset

bricks
\begin_inset Quotes erd
\end_inset

 and land.
 The entire stock of land is held by households inside their housing good.
 An intermediary buys 
\begin_inset Quotes eld
\end_inset

bricks
\begin_inset Quotes erd
\end_inset

 and buys land released from depreciated housing, packages these together
 and sells the resulting housing good to families.
 Here we make an important simplification to the model for practical reasons.
 As over time the exact composition of new housing in terms of bricks and
 land may change, so does the implicit composition in terms of bricks and
 land of the total housing holdings, and this affects households of different
 ages differently.
 We simplify the model by assuming that the composition of housing in terms
 of bricks and land is always identical for all households.
 This avoids having to trace two additional age specific stock variables
 (bricks and land) inside the household problem, and is similar to the assumptio
n used in the labor market where the age distribution of workers is the
 same in every firm.
\end_layout

\begin_layout Standard
Now, inside the housing good 
\begin_inset Quotes eld
\end_inset

bricks
\begin_inset Quotes erd
\end_inset

 depreciate but land does not.
 Nevertheless, the depreciation rate of the housing object is still the
 depreciation rate of bricks, as the land associated with depreciated bricks
 is released and sold by the household.
 Therefore we account for the released land as 
\begin_inset Quotes eld
\end_inset

lost
\begin_inset Quotes erd
\end_inset

 in the normal law of motion
\begin_inset Formula 
\[
Z_{j,a,t}=D_{j,a,t}-\left(1-\delta_{t}^{bricks}\right)D_{j,a-1,t-1}
\]

\end_inset

and 
\begin_inset Quotes eld
\end_inset

recover
\begin_inset Quotes erd
\end_inset

 it as household revenues from land sales.
\end_layout

\begin_layout Standard
One final detail is that new land is released into the economy every period.
 The aggregate land variable grows exogenously and this land growth is helicopte
r dropped on households proportionally to their individual land holdings.
 In order to settle the accounting of land sales we must determine the individua
l land holdings relative to aggregate land.
\end_layout

\begin_layout Standard
Individual households own the following fraction of total land:
\begin_inset Formula 
\[
\left(\frac{D_{j,a-1,t-1}\cdot\Upsilon_{j}N_{a-1,t-1}}{\sum_{j}\sum_{a}\Upsilon_{j}D_{j,a-1,t-1}N_{a-1,t-1}}\right)\frac{1}{\Upsilon_{j}N_{a-1,t-1}}
\]

\end_inset

The term in brackets contains the fraction of total land held by the appropriate
 population group 
\begin_inset Formula $(j,a,t)$
\end_inset

.
 The second term is 1 over the size of that population.
 The product of the two yields the fraction of individual land holdings.
 Eliminating terms this equals 
\begin_inset Formula $D_{j,a-1,t-1}\varOmega_{t}^{Land}$
\end_inset

 where
\begin_inset Formula 
\[
\varOmega_{t}^{Land}\equiv\frac{1}{\sum_{j}\sum_{a}\Upsilon_{j}D_{j,a-1,t-1}N_{a-1,t-1}}=\frac{1}{D_{t-1}}
\]

\end_inset

Now we are ready to determine revenues from land sales.
 The total quantity of land being sold is the land released by housing depreciat
ion plus the helicopter land growth, 
\begin_inset Formula $Land_{t}^{sales}=\delta_{t}^{bricks}Land_{t-1}+Land_{t}-Land_{t-1}$
\end_inset

.
 Individual revenues from selling land are then given by
\begin_inset Formula 
\[
D_{j,a-1,t-1}\cdot\varOmega_{t}^{Land}P_{t}^{Land}Land_{t}^{Sales}
\]

\end_inset

This quantity is now adapted to the model in the main text by defining the
 object 
\begin_inset Formula $\alpha_{t}^{Land}$
\end_inset

.
 This is given by
\begin_inset Formula 
\[
\alpha_{t}^{Land}=\frac{\varOmega_{t}^{Land}P_{t}^{Land}Land_{t}^{Sales}}{P_{t-1}^{D}}=\frac{P_{t}^{Land}Land_{t}^{Sales}}{P_{t-1}^{D}D_{t-1}}
\]

\end_inset

where 
\begin_inset Formula $\alpha_{t}^{Land}$
\end_inset

 is the same for all households.
\end_layout

\begin_layout Standard
A final remark regarding depreciation is in order.
 Housing depreciation is endogenous in the data.
 Maintenance investments prolong the life of a house.
 Such investments are choices and either consist of home production or of
 purchases from small to medium size service providers such as plumbers
 and carpenters.
 This is a simple model extension which can later be included in MAKRO if
 necessary.
\end_layout

\begin_layout Subsubsection
Mortgages and Housing in the budget constraint
\begin_inset CommandInset label
LatexCommand label
name "subsec:Mortgages-and-Housing"

\end_inset


\end_layout

\begin_layout Paragraph

\series bold
Preliminaries.
\end_layout

\begin_layout Standard
The law of motion for the housing stock is 
\begin_inset Formula 
\[
D_{a,t}=\left(1-\delta^{d}\right)D_{a-1,t-1}+Z_{a,t}
\]

\end_inset


\end_layout

\begin_layout Standard
When we derive the budget constraint we consider the cases of positive versus
 negative net investment in housing since when 
\begin_inset Formula $Z_{a,t}>0$
\end_inset

 we want to to impose a down-payment constraint but when 
\begin_inset Formula $Z_{a,t}<0$
\end_inset

 we do not.
 In order to make the budget constraint easier to read define the composite
 variable
\begin_inset Formula 
\[
\Delta_{a,t}\equiv B_{a,t}-\left(1+r_{a,t}\right)B_{a-1,t-1}-yDisp_{a,t}+rent_{t}H_{a,t}
\]

\end_inset


\end_layout

\begin_layout Standard
We postulate the exogenous relationship for the mortgage debt stock 
\begin_inset Formula $X_{a,t}^{M}$
\end_inset

, such that mortgages are proportional to the value of the house
\begin_inset Formula 
\[
X_{a,t}^{M}=\mu_{a,t}p_{t}^{D}D_{a,t}
\]

\end_inset

where 
\begin_inset Formula $\mu_{a,t}$
\end_inset

 is a variable which is exogenous to the household, and which we detail
 below.
 Endogenous mortgage ratios increase the size of the model and require modelling
 of credit relationships which is a non trivial expansion of MAKRO.
\end_layout

\begin_layout Paragraph

\series bold
The budget constraint: positive investment in housing.
\end_layout

\begin_layout Standard
Consider first the case of 
\begin_inset Formula $Z_{a,t}>0$
\end_inset

.
 The term 
\begin_inset Formula $M_{a,t}^{DP}>0$
\end_inset

 is the fraction or amount paid in cash when increasing the housing stock
 (the down-payment), and 
\begin_inset Formula $m_{a,t}$
\end_inset

 is an unspecified mortgage payment.
 In this case the size of the mortgage stock obeys the law of motion
\begin_inset Formula 
\[
X_{a,t}^{M}=\left(1+r_{t}^{mort}\right)X_{a-1,t-1}^{M}+p_{t}^{D}Z_{a,t}-M_{a,t}^{DP}-m_{a,t}
\]

\end_inset

The budget constraint of the household is 
\begin_inset Formula 
\[
\Delta_{a,t}+p_{t}^{C}C_{a,t}=-M_{a,t}^{DP}-m_{a,t}
\]

\end_inset


\begin_inset Formula 
\[
-\left(\tau_{t}^{W}+x_{t}\right)p_{t-1}^{D}D_{a-1,t-1}+p_{t-1}^{D}D_{a-1,t-1}\alpha_{t}^{Land}
\]

\end_inset


\end_layout

\begin_layout Standard
where 
\begin_inset Formula $\tau^{W}$
\end_inset

 is the wealth tax rate, 
\begin_inset Formula $x_{t}$
\end_inset

 measures expenses in running the property, and the last term is the revenue
 from land sales.
 Now use 
\begin_inset Formula $X_{a,t}=\mu_{a,t}p_{t}^{D}D_{a,t}$
\end_inset

, and the laws of motion for 
\begin_inset Formula $D$
\end_inset

 and 
\begin_inset Formula $X^{M}$
\end_inset

 to get
\begin_inset Formula 
\[
\Delta_{a,t}+p_{t}^{C}C_{a,t}=-\left(1+r_{t}^{mort}\right)\mu_{a-1,t-1}p_{t-1}^{D}D_{a-1,t-1}+\mu_{a,t}p_{t}^{D}D_{a,t}
\]

\end_inset


\begin_inset Formula 
\[
-p_{t}^{D}D_{a,t}+p_{t}^{D}\left(1-\delta_{t}\right)D_{a-1,t-1}
\]

\end_inset


\begin_inset Formula 
\[
-\left(\tau_{t}^{W}+x_{t}\right)p_{t-1}^{D}D_{a-1,t-1}+p_{t-1}^{D}D_{a-1,t-1}\alpha_{t}^{Land}
\]

\end_inset


\end_layout

\begin_layout Paragraph

\series bold
The budget constraint: negative investment in housing.
\end_layout

\begin_layout Standard
Consider now the case of 
\begin_inset Formula $Z_{a,t}<0$
\end_inset

.
 The budget constraint of the household does not have a down payment fraction
 but rather keeps the entire proceeds of the net sale 
\begin_inset Formula 
\[
\Delta_{a,t}+p_{t}^{C}C_{a,t}=-p_{t}^{D}Z_{a,t}-m_{a,t}
\]

\end_inset


\begin_inset Formula 
\[
-\left(\tau_{t}^{W}+x_{t}\right)p_{t-1}^{D}D_{a-1,t-1}+p_{t-1}^{D}D_{a-1,t-1}\alpha_{t}^{Land}
\]

\end_inset

Since none of the revenues are used to pay down the mortgage, the size of
 the mortgage stock obeys the law of motion
\begin_inset Formula 
\[
X_{a,t}^{M}=\left(1+r_{t}^{mort}\right)\cdot X_{a-1,t-1}^{M}-m_{a,t}
\]

\end_inset

When we put the two together we obtain exactly the same as above.
 There is no asymmetry in the problem.
 Of note is also the fact that the mortgage payment 
\begin_inset Formula $m_{a,t}$
\end_inset

 disappears entirely from the problem.
\end_layout

\begin_layout Paragraph

\series bold
The 
\begin_inset Formula $f$
\end_inset

 object.
\end_layout

\begin_layout Standard
Reorganizing terms yields the 
\begin_inset Formula $f$
\end_inset

 object we use in the main text.
\begin_inset Formula 
\[
f\left(D_{a,t},D_{a-1,t-1}\right)=\left(1-\mu_{a,t}\right)P_{t}^{D}D_{a,t}
\]

\end_inset


\begin_inset Formula 
\[
+\left\{ \left(1+r_{t}^{mort}\right)\mu_{a-1,t-1}+\tau_{t}^{W}+x_{t}-\frac{P_{t}^{D}}{P_{t-1}^{D}}\left(1-\delta_{t}^{d}\right)-\alpha_{t}^{Land}\right\} P_{t-1}^{D}D_{a-1,t-1}
\]

\end_inset


\end_layout

\begin_layout Paragraph

\series bold
No transaction costs.
\end_layout

\begin_layout Standard
Proper aggregation of non-convexities at the micro level, such as fixed
 costs of trading houses, is necessary for an accurate description of aggregate
 behavior.
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
See the entire literature on firm investment with non convexities.
 Specific examples are Cooper and Adda (2000) on cars, Li, Liu, Yang, and
 Yao (2016) on housing, and Ampudia, Cooper, LeBlanc and Zhu (2019) on financial
 portfolio adjustment.
\end_layout

\end_inset

 Given the constraints imposed by the GAMS software and by the size of the
 model introducing these non differentiabilities excessively increases the
 computational burden.
 In the absence of an endogenous trade-off between renting and owning we
 leave such adjustment costs out of the problem, and proxy for them through
 the reference housing value inserted into the utility function.
\end_layout

\begin_layout Subsubsection
The Mortgage Ratio 
\begin_inset Formula $\mu$
\end_inset

.
\end_layout

\begin_layout Standard
It is useful here to preserve the type index 
\begin_inset Formula $j$
\end_inset

 in the algebra that follows.
 Mortgages are proportional to the value of the house
\begin_inset Formula 
\[
X_{j,a,t}^{M}=\mu_{j,a,t}P_{t}^{D}D_{j,a,t}
\]

\end_inset

where 
\begin_inset Formula $\mu_{a,t}$
\end_inset

 is exogenous to the household and is given by
\begin_inset Formula 
\[
\mu_{j,a,t}=\tilde{\mu}_{a,t}\frac{\bar{P}_{j,a,t}^{D}}{P_{t}^{D}}
\]

\end_inset

where 
\begin_inset Formula $\tilde{\mu}_{a,t}$
\end_inset

 is a calibration object exogenous to the model.
 It is in this expression that the type index is necessary, in order to
 highlight the difference between the average data profile in 
\begin_inset Formula $\tilde{\mu}_{a,t}$
\end_inset

 versus the individual and type specific nature of the other variables.
\end_layout

\begin_layout Standard
The reference price 
\begin_inset Formula $\bar{P}_{a,t}^{D}$
\end_inset

 is a function of current and past prices of the form
\begin_inset Formula 
\[
\bar{P}_{j,a,t}^{D}=\Gamma_{j,a,t}^{p}P_{t}^{D}+\left(1-\Gamma_{j,a,t}^{p}\right)\bar{P}_{j,a-1,t-1}^{D}
\]

\end_inset

The factor 
\begin_inset Formula $\Gamma_{j,a,t}^{p}$
\end_inset

 is a measure of new borrowing.
 A simple measure is the ratio of current investment over final stock
\begin_inset Formula 
\[
\Gamma_{j,a,t}^{p}=\frac{Z_{j,a,t}}{D_{j,a,t}}=\frac{D_{j,a,t}-\left(1-\delta^{d}\right)D_{j,a-1,t-1}}{D_{j,a,t}}
\]

\end_inset

In this way, for the first age of economic life when houses are bought,
 
\begin_inset Formula $\Gamma_{j,a,t}^{p}=1$
\end_inset

, implying all mortgages are new and subject to the current price.
 This number 
\begin_inset Formula $\Gamma_{j,a,t}^{p}$
\end_inset

 is bounded above by 1 and since 
\begin_inset Formula $D$
\end_inset

 is always positive it has a finite lower bound.
 Younger agents are much more subject to the variation in house prices than
 older ones.
 The ability to finance through a mortgage therefore varies with house prices.
 Given 
\begin_inset Formula $\Gamma_{j,a,t}^{p}$
\end_inset

 the ratio
\begin_inset Formula 
\[
\mu_{j,a,t}=\tilde{\mu}_{a,t}\frac{\bar{P}_{j,a,t}^{D}}{P_{t}^{D}}=\tilde{\mu}_{a,t}\left(\Gamma_{j,a,t}^{p}+\left(1-\Gamma_{j,a,t}^{p}\right)\frac{\bar{P}_{j,a-1,t-1}^{D}}{P_{t}^{D}}\right)
\]

\end_inset

falls at impact with an increase in house prices.
 The household can mortgage more as prices increase, since 
\begin_inset Formula $X_{j,a,t}^{M}=\mu_{j,a,t}P_{t}^{D}D_{j,a,t}$
\end_inset

 increases with the house price keeping all else constant, but less than
 proportionally.
 Leverage ratios fall with house price increases.
 But since 
\begin_inset Formula $\Gamma_{j,a,t}^{p}$
\end_inset

 changes endogenously as housing decisions react to house prices the mortgage
 ratio is more reactive.
 Leverage ratios fall slightly more with house price increases if investment
 falls.
 The exact effect depends on how persistent the increase in prices is, which
 affects the investment decision.
 A temporary increase in house prices should trigger a strong fall in investment.
 A permanent one not necessarily so.
 We use a slightly more general way of writing this factor as follows
\begin_inset Formula 
\[
\Gamma_{j,a,t}^{p}=\left(1-\phi\right)+\phi\frac{D_{j,a,t}-\left(1-\delta^{d}\right)D_{j,a-1,t-1}}{D_{j,a,t}}=1-\phi\left(1-\delta^{d}\right)\frac{D_{j,a-1,t-1}}{D_{j,a,t}}
\]

\end_inset

as it allows for a degree of control over the influence of the endogenous
 housing decision on the mortgage ratios.
\end_layout

\begin_layout Subsubsection
Aggregation
\end_layout

\begin_layout Standard
Due to migration flows, population obeys
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
We assume household types are always in the same proportion in the different
 flows and stocks.
 The type index 
\begin_inset Formula $j$
\end_inset

 is omitted throughout this section, although the necessary adjustments
 due to type heterogeneity are done in the code.
\end_layout

\end_inset


\begin_inset Formula 
\[
N_{a,t}=s_{a-1,t-1}N_{a-1,t-1}+I_{a,t}-E_{a,t}
\]

\end_inset

While in the data immigrants and emigrants are different from the average
 household in most respects, the model is nevertheless bound by the necessity
 to fit all agents into an average that can be replicated.
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Non migrants are also heterogeneous and yet only their average by age is
 in the model.
\end_layout

\end_inset

 The household model has two dimensions of heterogeneity, age and type.
 Any additional heterogeneity is eliminated.
\end_layout

\begin_layout Standard
The goal is then to generate average quantities of assets 
\begin_inset Formula $B$
\end_inset

, housing 
\begin_inset Formula $D$
\end_inset

, consumption 
\begin_inset Formula $C$
\end_inset

, and employment that encompass residents and migrants in an internally
 consistent way.
 In the labor market chapter we detail the assumptions and mechanics needed
 to generate average employment, and here we detail the aggregation of assets
 and housing.
 We therefore assume that migrants carry with them the necessary assets
 to appropriately fit the resulting average.
 That is not the only assumption required, so we first work through an aggregati
on example without housing, and then replicate it with added housing.
\end_layout

\begin_layout Paragraph*
Aggregation without housing.
\end_layout

\begin_layout Standard
We 
\series bold
first
\series default
 detail the budget constraint of three groups of households.
 Surviving residents 
\begin_inset Formula $s_{a-1,t-1}N_{a-1,t-1}-E_{a,t}$
\end_inset

 have the budget constraint where 
\begin_inset Formula $x_{a,t}\equiv y_{a,t}-P_{t}^{C}C_{a,t}$
\end_inset

 and where we have added a transfer term 
\begin_inset Formula $T_{a,t}^{S}$
\end_inset

 (superscript S for stayers):
\begin_inset Formula 
\[
B_{a,t}-x_{a,t}=\left(1+r_{a,t}\right)B_{a-1,t-1}+T_{a,t}^{S}
\]

\end_inset

The people who leave, 
\begin_inset Formula $E_{a,t}$
\end_inset

 receive/pay a transfer 
\begin_inset Formula $T_{a,t}^{E}$
\end_inset

 before leaving.
 They do not earn income, consume or buy end-of-period assets in the country
 this period so that their constraint is simply a definition of the amount
 
\begin_inset Formula $M_{a,t}$
\end_inset

 they carry abroad:
\begin_inset Formula 
\[
M_{a,t}\equiv\left(1+r_{a,t}\right)B_{a-1,t-1}+T_{a,t}^{E}
\]

\end_inset

Finally, the people who enter the country, 
\begin_inset Formula $I_{a,t}$
\end_inset

 receive/pay a transfer 
\begin_inset Formula $T_{a,t}^{I}$
\end_inset

 after arrival.
 This transfer and the assets 
\begin_inset Formula $A$
\end_inset

 they bring into the country allow them to make identical choices to those
 of the first group (the stayers): 
\begin_inset Formula 
\[
B_{a,t}-x_{a,t}=A_{a-1,t-1}+T_{a,t}^{I}
\]

\end_inset

The 
\series bold
next
\series default
 step is to define some properties we need to impose.
 We choose to impose a zero net effect on the balance of payments.
 This implies the following relationship between households entering and
 exiting the country:
\begin_inset Formula 
\[
A_{a-1,t-1}=\frac{E_{a,t}}{I_{a,t}}M_{a,t}=\frac{E_{a,t}}{I_{a,t}}\left(1+r_{a,t}\right)B_{a-1,t-1}+\frac{E_{a,t}}{I_{a,t}}T_{a,t}^{E}
\]

\end_inset

We then impose that the transfer flows have zero net sum.
 This implies:
\begin_inset Formula 
\[
\left[s_{a-1,t-1}N_{a-1,t-1}-E_{a,t}\right]T_{a,t}^{S}+E_{a,t}T_{a,t}^{E}+I_{a,t}T_{a,t}^{I}=0
\]

\end_inset

and finally we impose equality of stayers and new arrivals which implies
\begin_inset Formula 
\[
T_{a,t}^{I}=\left(1+r_{a,t}\right)B_{a-1,t-1}+T_{a,t}^{S}-A_{a-1,t-1}
\]

\end_inset


\series bold
Now
\series default
 we can aggregate to obtain the budget constraint of the population within
 each type (age and discount factor), 
\begin_inset Formula $N_{a,t}$
\end_inset

.
 This is done in the following steps.
 Add surviving residents 
\begin_inset Formula $s_{a-1,t-1}N_{a-1,t-1}-E_{a,t}$
\end_inset

 plus incomers
\begin_inset Formula 
\[
N_{a,t}\left[B_{a,t}-x_{a,t}\right]=\left[s_{a-1,t-1}N_{a-1,t-1}-E_{a,t}\right]\left[\left(1+r_{a,t}\right)B_{a-1,t-1}+T_{a,t}^{S}\right]+I_{a,t}\left[A_{a-1,t-1}+T_{a,t}^{I}\right]
\]

\end_inset

replace the zero balance of payments relationship
\begin_inset Formula 
\[
N_{a,t}\left[B_{a,t}-x_{a,t}\right]=\left[s_{a-1,t-1}N_{a-1,t-1}-E_{a,t}\right]\left[\left(1+r_{a,t}\right)B_{a-1,t-1}+T_{a,t}^{S}\right]
\]

\end_inset


\begin_inset Formula 
\[
+I_{a,t}\left[\frac{E_{a,t}}{I_{a,t}}\left(1+r_{a,t}\right)B_{a-1,t-1}+\frac{E_{a,t}}{I_{a,t}}T_{a,t}^{E}+T_{a,t}^{I}\right]
\]

\end_inset

replace 
\begin_inset Formula $T^{I}$
\end_inset

 with the equality of stayers and incomers and collect terms to obtain
\begin_inset Formula 
\[
B_{a,t}-x_{a,t}=\left(1+r_{a,t}\right)B_{a-1,t-1}+T_{a,t}^{S}
\]

\end_inset


\series bold
Finally
\series default
, determine the transfer payments 
\begin_inset Formula $T$
\end_inset

.
 If we put together the relationships on zero balance of payments, zero
 net transfers, and the equality of stayers and new arrivals, we obtain
 that
\begin_inset Formula 
\[
T_{a,t}^{S}=-\frac{\left(I_{a,t}-E_{a,t}\right)}{N_{a,t}}\left(1+r_{a,t}\right)B_{a-1,t-1}
\]

\end_inset


\begin_inset Formula 
\[
T_{a,t}^{I}=\left(I_{a,t}-E_{a,t}\right)\left[\frac{1}{I_{a,t}}-\frac{1}{N_{a,t}}\right]\left(1+r_{a,t}\right)B_{a-1,t-1}-\frac{E_{a,t}}{I_{a,t}}T_{a,t}^{E}
\]

\end_inset

and using this we can rewrite the aggregate budget constraint as
\begin_inset Formula 
\[
B_{a,t}-x_{a,t}=\left(1+r_{a,t}\right)B_{a-1,t-1}\Gamma_{a,t}
\]

\end_inset

where 
\begin_inset Formula 
\[
\Gamma_{a,t}=\frac{s_{a-1,t-1}N_{a-1,t-1}}{N_{a,t}}
\]

\end_inset


\end_layout

\begin_layout Standard
One last detail is that the transfer 
\begin_inset Formula $T_{a,t}^{E}$
\end_inset

 is arbitrary and can be set at zero.
 These transfers are artificial constructions used to ensure new arrivals
 and surviving residents can make the same exact decisions subject to a
 balance of payments constraint which in this case is zero.
 They are added to the problem as a lump sum which is taken as exogenous
 by the household and do not affect marginal decisions.
 Furthermore, as all agents make identical choices within age and type,
 the only budget constraint that needs to be satisfied is the aggregate
 one, namely
\begin_inset Formula 
\[
B_{a,t}-x_{a,t}=\left(1+r_{a,t}\right)B_{a-1,t-1}\Gamma_{a,t}
\]

\end_inset


\end_layout

\begin_layout Paragraph*
Aggregation with housing.
\end_layout

\begin_layout Standard
Surviving residents 
\begin_inset Formula $s_{a-1,t-1}N_{a-1,t-1}-E_{a,t}$
\end_inset

 have the budget constraint
\begin_inset Formula 
\[
B_{a,t}-x_{a,t}+\left(1-\mu_{a,t}\right)P_{t}^{D}D_{a,t}=\left(1+r_{a,t}\right)B_{a-1,t-1}-\chi_{a,t}P_{t-1}^{D}D_{a-1,t-1}+T_{a,t}^{S}
\]

\end_inset

where
\begin_inset Formula 
\[
\chi_{a,t}\equiv\left(1+r_{t}^{mort}\right)\mu_{a-1,t-1}+\tau_{t}^{W}+x_{t}-\frac{P_{t}^{D}}{P_{t-1}^{D}}\left(1-\delta_{t}^{d}\right)-\alpha_{t}^{Land}
\]

\end_inset

The people who leave, 
\begin_inset Formula $E_{a,t}$
\end_inset

 do not consume or work in the country, and sell their houses so that 
\begin_inset Formula $Z_{a,t}=-\left(1-\delta_{t}\right)D_{a-1,t-1}<0$
\end_inset

 and take their assets and proceedings abroad.
 Because they are downsizing, their budget constraint does not have a down
 payment fraction but rather keeps the entire proceeds of the sale.
 The final mortgage payment 
\begin_inset Formula $m$
\end_inset

 liquidates the outstanding mortgage so that we obtain
\begin_inset Formula 
\[
M_{a,t}\equiv\left(1+r_{a,t}\right)B_{a-1,t-1}-\chi_{a,t}P_{t-1}^{D}D_{a-1,t-1}+T_{a,t}^{E}
\]

\end_inset

and where 
\begin_inset Formula $M_{a,t}$
\end_inset

 is the amount these agents will take abroad.
\end_layout

\begin_layout Standard
The people who enter the country, 
\begin_inset Formula $I_{a,t}$
\end_inset

 have 
\begin_inset Formula $Z_{a,t}=D_{a,t}>0$
\end_inset

 and they earn their income and consume here while they bring assets 
\begin_inset Formula $A_{a-1,t-1}$
\end_inset

 from abroad.
 Their housing expenditure is 
\begin_inset Formula $\left(1-\mu_{a}\right)P_{t}^{D}D_{a,t}$
\end_inset

.
 Their full budget constraint is
\begin_inset Formula 
\[
B_{a,t}-x_{a,t}+\left(1-\mu_{a,t}\right)P_{t}^{D}D_{a,t}=A_{a-1,t-1}+T_{a,t}^{I}
\]

\end_inset

We now impose the three conditions from above.
 Once again the zero balance of payments effect is defined as
\begin_inset Formula 
\[
A_{a-1,t-1}=\frac{E_{a,t}}{I_{a,t}}M_{a,t}
\]

\end_inset

and the property that the transfer flows have zero net sum is also as above:
\begin_inset Formula 
\[
\left[s_{a-1,t-1}N_{a-1,t-1}-E_{a,t}\right]T_{a,t}^{S}+E_{a,t}T_{a,t}^{E}+I_{a,t}T_{a,t}^{I}=0
\]

\end_inset

and finally the equality of stayers and new arrivals now implies
\begin_inset Formula 
\[
T_{a,t}^{I}=\left(1+r_{a,t}\right)B_{a-1,t-1}-\chi_{a,t}P_{t-1}^{D}D_{a-1,t-1}+T_{a,t}^{S}-A_{a-1,t-1}
\]

\end_inset

Reproducing the same steps performed above we will find that we can set
 
\begin_inset Formula $T_{a,t}^{E}=0$
\end_inset

 and that we obtain the following objects.
 The aggregate budget constraint
\begin_inset Formula 
\[
B_{a,t}+\left(1-\mu_{a,t}\right)P_{t}^{D}D_{a,t}=y_{a,t}-P_{t}^{C}C_{a,t}
\]

\end_inset


\begin_inset Formula 
\[
+\left[\left(1+r_{a,t}\right)B_{a-1,t-1}-\chi_{a,t}P_{t-1}^{D}D_{a-1,t-1}\right]\Gamma_{a,t}
\]

\end_inset

and the transfer
\begin_inset Formula 
\[
T_{a,t}^{S}=-\frac{\left(I_{a,t}-E_{a,t}\right)}{N_{a,t}}\left[\left(1+r_{a,t}\right)B_{a-1,t-1}-\chi_{a,t}P_{t-1}^{D}D_{a-1,t-1}\right]
\]

\end_inset

and again the only budget constraint that needs to be satisfied is the aggregate
 one.
\end_layout

\begin_layout Standard
It is useful to emphasize here that cohort aggregation, which is used extensivel
y in the code, brings in the factor 
\begin_inset Formula $\Gamma_{a,t}$
\end_inset

 attached to the lagged stocks 
\begin_inset Formula $B_{a-1,t-1}$
\end_inset

 and 
\begin_inset Formula $D_{a-1,t-1}$
\end_inset

.
 In most of the text here this does not show since we are concerned with
 the decisions of individual households.
\end_layout

\begin_layout Subsubsection
Housing intermediary
\end_layout

\begin_layout Standard
Households buy houses from a particular intermediary agent.
 The purpose of having this agent is to introduce land in the model.
 Although studies for other countries are only indicative of possible effects
 in Danmark, they document land as a fundamental factor affecting house
 prices.
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Davis, M.
 A., and Heathcote, J.
 (2005).
 Housing and the Business Cycle.
 International Economic Review, Vol.
 46, No.
 3, pp.
 751-784.
 Davis, M.
 A.
 and Heathcote, J.
 (2007).
 The price and quantity of residential land in the United States.
 Journal of Monetary Economics, vol.
 54(8), pp.
 2595-2620.
\end_layout

\end_inset

 The housing intermediary buys bricks from the construction sector and land
 from households, packages them and sells them to households as houses.
 These are the new houses 
\begin_inset Formula $q_{t}^{n}$
\end_inset

 built in a given period and correspond to the aggregate net investment
 obtained in the household problem after summing over age, 
\begin_inset Formula $q_{t}^{n}\equiv D_{t}-\left(1-\delta_{t}\right)D_{t-1}$
\end_inset

.
\end_layout

\begin_layout Standard
The intermediary agent has profits given by
\begin_inset Formula 
\[
\pi_{t}=P_{t}^{D}q_{t}^{n}-P_{t}^{Land}q_{t}^{LS}-P_{t}^{I}q_{t}^{I}
\]

\end_inset

where new houses 
\begin_inset Formula $q_{t}^{n}$
\end_inset

 equal gross output minus adjustment costs, 
\begin_inset Formula $q_{t}^{n}=q_{t}^{y}-q_{t}^{ac}$
\end_inset

, and gross output 
\begin_inset Formula $q_{t}^{y}$
\end_inset

 uses land 
\begin_inset Formula $q_{t}^{LS}$
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

bricks
\begin_inset Quotes erd
\end_inset

 
\begin_inset Formula $q_{t}^{I}$
\end_inset

 which here are labelled as an investment quantity because they will be
 used to accumulate an auxiliary stock of buildings needed to match data.
 The adjustment cost function is added to the problem here in order to help
 fit dynamic behaviour of house prices and quantities.
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Ideally these adjustment costs would be introduced at the individual household
 level but that increased significantly the computational burden due to
 the large life cycle.
 Also, at the age specific household level they would mostly be fixed costs,
 something even more computationally demanding.
\end_layout

\end_inset

 This function is given by 
\begin_inset Formula 
\[
q_{t}^{ac}=\frac{\gamma}{2}q_{t-1}^{I}\left(\frac{q_{t}^{I}}{q_{t-1}^{I}}-\xi_{t}^{I}\right)^{2}
\]

\end_inset

while the first order conditions are
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{t}^{D}\left[\frac{\partial q_{t}^{y}}{\partial q_{t}^{LS}}\right]\equiv P_{t}^{D}\left(\mu_{LS}\frac{q_{t}^{y}}{q_{t}^{LS}}\right)^{1/E}=P_{t}^{Land}
\]

\end_inset


\begin_inset Formula 
\[
P_{t}^{D}\left[\frac{\partial q_{t}^{y}}{\partial q_{t}^{I}}-\frac{\partial q_{t}^{ac}}{\partial q_{t}^{I}}\right]=P_{t}^{I}+\beta_{t+1}P_{t+1}^{D}\left[\frac{\partial q_{t+1}^{ac}}{\partial q_{t}^{I}}\right]
\]

\end_inset

It is useful to detail the second condition which is dynamic and forward
 looking due to the adjustment cost function
\begin_inset Formula 
\[
P_{t}^{D}\left[\left(\mu_{I}\frac{q_{t}^{y}}{q_{t}^{I}}\right)^{1/E}-\gamma\left(\frac{q_{t}^{I}}{q_{t-1}^{I}}-\xi_{t}^{I}\right)\right]=P_{t}^{I}+\beta_{t+1}P_{t+1}^{D}\left[\frac{\gamma}{2}\left(\frac{q_{t+1}^{I}}{q_{t}^{I}}\right)^{2}+\frac{\gamma}{2}\left(\xi_{t+1}^{I}\right)^{2}\right]
\]

\end_inset

so that we can write demand functions in CES style
\begin_inset Formula 
\[
q_{t}^{LS}=\mu_{LS}\cdot q_{t}^{y}\left(\frac{P_{t}^{Land}}{P_{t}^{D}}\right)^{-E}
\]

\end_inset


\begin_inset Formula 
\[
q_{t}^{I}=\mu_{I}\cdot q_{t}^{y}\left(\frac{user_{t}}{P_{t}^{D}}\right)^{-E}
\]

\end_inset


\begin_inset Formula 
\[
user_{t}=P_{t}^{I}+\gamma P_{t}^{D}\left\{ \frac{q_{t}^{I}}{q_{t-1}^{I}}-\xi_{t}^{I}+\beta_{t+1}\frac{P_{t+1}^{D}}{P_{t}^{D}}\frac{1}{2}\left[\left(\frac{q_{t+1}^{I}}{q_{t}^{I}}\right)^{2}+\left(\xi_{t+1}^{I}\right)^{2}\right]\right\} 
\]

\end_inset

Given these demand function the optimization problem solves using both of
 them and the CES zero profit condition
\begin_inset Formula 
\[
P_{t}^{D}q_{t}^{y}=P_{t}^{Land}q_{t}^{LS}+user_{t}q_{t}^{I}
\]

\end_inset

The quantity 
\begin_inset Formula $q_{t}^{I}$
\end_inset

 is then used to generate the stock variable 
\begin_inset Formula $q_{t}^{k}$
\end_inset

 in the standard manner
\begin_inset Formula 
\[
q_{t}^{k}=\left(1-\delta_{t}\right)q_{t-1}^{k}+q_{t}^{I}
\]

\end_inset

where 
\begin_inset Formula $\delta$
\end_inset

 is the depreciation rate of the 
\begin_inset Quotes eld
\end_inset

bricks
\begin_inset Quotes erd
\end_inset

 or buildings part of the house.
 This is a measure of the stock of construction in owned housing, the total
 stock of 
\begin_inset Quotes eld
\end_inset

bricks
\begin_inset Quotes erd
\end_inset

 contained in all existing owned housing.
 To this we add an exogenous capital stock of rental housing to get the
 stock variable that enters the housing production sector which is present
 in the input/output data, and which is described in the chapter on private
 production.
\end_layout

\begin_layout Subsubsection
Merging profits of intermediary with the household budget constraint.
\end_layout

\begin_layout Standard
Due to the addition of adjustment costs the intermediary agents have profits.
 As this is an auxiliary construction to introduce land into the model which
 does not have a correspondence in data, these profits are plugged back
 into the household budget constraint as transfers that do not affect the
 user cost and the marginal decisions of households.
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
The household model is designed to capture the majority of transactions
 which involve already built housing.
 The possibility that households themselves buy land and contract the building
 of the house is partially captured by the intermediary and the inclusion
 of its profits in the budget constraint.
\end_layout

\end_inset

 Profits are allocated to households by age using the weight 
\begin_inset Formula $D_{a-1,t-1}/D_{t-1}$
\end_inset

 as illustrated in the optimizing household budget constraint.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
B_{a,t}=\left(1+r_{a,t}\right)B_{a-1,t-1}+\tilde{y}_{a,t}-p_{t}^{c}C_{a,t}-\left(1-\mu_{a,t}\right)P_{t}^{D}D_{a,t}
\]

\end_inset


\begin_inset Formula 
\[
-\left\{ \left(1+r_{t}^{mort}\right)\mu_{a-1,t-1}+\tau_{t}^{W}+x_{t}-\frac{P_{t}^{D}}{P_{t-1}^{D}}\left(1-\delta_{t}^{d}\right)-\alpha_{t}^{Land}\right\} P_{t-1}^{D}D_{a-1,t-1}
\]

\end_inset


\begin_inset Formula 
\[
+\underbrace{\frac{D_{a-1,t-1}}{D_{t-1}}}_{weight}\left\{ \underbrace{P_{t}^{D}\left[D_{t}-\left(1-\delta_{t}^{d}\right)D_{t-1}\right]-P_{t}^{Land}q_{t}^{LS}-P_{t}^{I}q_{t}^{I}}_{profits}\right\} 
\]

\end_inset

At this point we work on the algebra of the budget constraint to simplify
 the expression and reduce the computational burden.
 We first decompose the last line
\begin_inset Formula 
\[
...\frac{D_{a-1,t-1}}{D_{t-1}}P_{t}^{D}\left[D_{t}-\left(1-\delta_{t}^{d}\right)D_{t-1}\right]-\frac{D_{a-1,t-1}}{D_{t-1}}P_{t}^{Land}q_{t}^{LS}-\frac{D_{a-1,t-1}}{D_{t-1}}P_{t}^{I}q_{t}^{I}
\]

\end_inset

and eliminate the terms in 
\begin_inset Formula $\left(1-\delta_{t}^{d}\right)$
\end_inset

 to obtain
\begin_inset Formula 
\[
B_{a,t}=\left(1+r_{a,t}\right)B_{a-1,t-1}+\tilde{y}_{a,t}-p_{t}^{c}C_{a,t}-\left(1-\mu_{a,t}\right)P_{t}^{D}D_{a,t}
\]

\end_inset


\begin_inset Formula 
\[
-\left\{ \left(1+r_{t}^{mort}\right)\mu_{a-1,t-1}+\tau_{t}^{W}+x_{t}\right\} P_{t-1}^{D}D_{a-1,t-1}+\alpha_{t}^{Land}P_{t-1}^{D}D_{a-1,t-1}
\]

\end_inset


\begin_inset Formula 
\[
+P_{t}^{D}D_{a-1,t-1}\left[\frac{D_{t}}{D_{t-1}}\right]-\frac{D_{a-1,t-1}}{D_{t-1}}P_{t}^{Land}q_{t}^{LS}-\frac{D_{a-1,t-1}}{D_{t-1}}P_{t}^{I}q_{t}^{I}
\]

\end_inset

now use the fact that 
\begin_inset Formula $\alpha_{t}^{Land}$
\end_inset

 is given by 
\begin_inset Formula 
\[
\alpha_{t}^{Land}=\frac{P_{t}^{Land}q_{t}^{LS}}{P_{t-1}^{D}D_{t-1}}
\]

\end_inset

and replace so that the land terms disappear completely and obtain a budget
 constraint with fewer terms
\begin_inset Formula 
\[
B_{a,t}=\left(1+r_{a,t}\right)B_{a-1,t-1}+\tilde{y}_{a,t}-p_{t}^{c}C_{a,t}-\left(1-\mu_{a,t}\right)P_{t}^{D}D_{a,t}
\]

\end_inset


\begin_inset Formula 
\[
-\left\{ \left(1+r_{t}^{mort}\right)\mu_{a-1,t-1}+\tau_{t}^{W}+x_{t}-\frac{P_{t}^{D}D_{t}-P_{t}^{I}q_{t}^{I}}{P_{t-1}^{D}D_{t-1}}\right\} P_{t-1}^{D}D_{a-1,t-1}
\]

\end_inset


\end_layout

\begin_layout Subsubsection
The multiplier effects of leverage.
\end_layout

\begin_layout Standard
The presence of the mortgage contract generates a leverage effect in the
 model.
 Specifically, when house prices rise, 
\begin_inset Formula $p_{t}^{D}>p_{t-1}^{D}$
\end_inset

, the existing debt obligation is valued at prices 
\begin_inset Formula $p_{t-1}^{D}$
\end_inset

 but now the equity on the house is valued at the house price 
\begin_inset Formula $p_{t}^{D}$
\end_inset

.
 It may be profitable to liquidate the previous mortgage, sell the house
 and buy a bigger house using the fact that one only has to commit a small
 fraction of funds because one is allowed to borrow.
 This mechanism is better understood if we look explicitly at the cost of
 housing object 
\begin_inset Formula $f$
\end_inset

 in the budget constraint.
\begin_inset Formula 
\[
f\left(D_{a,t},D_{a-1,t-1}\right)=\left(1-\mu_{a,t}\right)P_{t}^{D}D_{a,t}
\]

\end_inset


\begin_inset Formula 
\[
+\left\{ \left(1+r_{t}^{mort}\right)\mu_{a-1,t-1}+\tau_{t}^{W}+x_{t}-\frac{P_{t}^{D}}{P_{t-1}^{D}}\left(1-\delta_{t}^{d}\right)-\alpha_{t}^{Land}\right\} P_{t-1}^{D}D_{a-1,t-1}
\]

\end_inset


\end_layout

\begin_layout Standard
We can rearrange this into
\begin_inset Formula 
\[
f=\underbrace{\left(1-\mu_{a,t}\right)P_{t}^{D}D_{a,t}}_{\text{Out of pocket: new house equity}}-\left[\underbrace{\left(1-\delta_{t}^{d}\right)\frac{P_{t}^{D}}{P_{t-1}^{D}}-\mu_{a-1,t-1}}_{\text{exisiting house equity ratio}}\right]P_{t-1}^{D}D_{a-1,t-1}
\]

\end_inset


\begin_inset Formula 
\[
+\underbrace{\left\{ r_{t}^{mort}\mu_{a-1,t-1}+\tau_{t}^{W}+x_{t}-\alpha_{t}^{Land}\right\} P_{t-1}^{D}D_{a-1,t-1}}_{\text{Unavoidable net carrying costs}}
\]

\end_inset


\end_layout

\begin_layout Standard
The key feature is that an increase in house prices has a marginal effect
 which is not dragged down by the previous debt 
\begin_inset Formula $\mu_{a-1,t-1}.$
\end_inset

 We have
\begin_inset Formula 
\[
\frac{\partial f}{\partial p_{t}^{D}}=\underbrace{\left(1-\mu_{a,t}\right)D_{a,t}}_{\text{effect on new house equity}}-\underbrace{\left(1-\delta_{t}^{d}\right)D_{a-1,t-1}}_{\text{effect on exisiting house equity}}
\]

\end_inset

and since 
\begin_inset Formula $1-\delta>1-\mu$
\end_inset

 the cost of housing comes down when house prices increase.
 Therefore it is possible to buy extra housing.
\end_layout

\begin_layout Standard
Notice that there are no transaction costs which implies taking advantage
 of the leverage effect is costless.
 This potentially makes the leverage effect very powerful.
\end_layout

\begin_layout Standard
Now, this mechanism here is static.
 Rational agents are forward looking so they will not rush to buy more houses
 if prices are likely to fall in the future, which will happen if the cause
 of the increase in house prices is a temporary shock.
 As they antecipate capital losses they will dampen their current response
 to the price increase.
\end_layout

\begin_layout Standard

\series bold
Financial accelerator
\end_layout

\begin_layout Standard
The leverage effect is 
\series bold
not
\series default
 the financial accelerator effect of Kyotaki and Moore (1997), or of Bernanke
 and Gertler (1995).
 In fact, the mortgage contract 
\series bold
worsens
\series default
 with an increase in house prices, 
\begin_inset Formula $\partial\mu/\partial p<0$
\end_inset

, which makes it a stabilizer rather than an accelerator.
 An increase in house prices, even though it raises the value of your current
 house does not relax the mortgage financial constraint but rather tightens
 it.
 It does, however, allow the household to exploit an available (slightly
 worse) contract and buy more houses simply because the household now has
 more money and because 
\series bold
there exists
\series default
 an available debt contract.
\end_layout

\begin_layout Standard
Yet, MAKRO does have an accelerator in the KM and BG sense.
 It lies in the utility from leaving a bequest.
 This object is a concave function of the sum 
\begin_inset Formula $B+p\left(1-\mu\right)D$
\end_inset

.
 This combined object has an admissible lower bound.
 If the household is near this lower bound, an increase in house prices
 allows liquid wealth 
\begin_inset Formula $B$
\end_inset

 to decrease, which allows households to consume more and buy more houses.
 The constraint has been relaxed by the house price increase, and here,
 buying extra housing relaxes the constraint next period also.
 This dynamic effect has all the hallmarks of the classic financial accelerator
 mechanism.
\end_layout

\end_body
\end_document
